<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>lib(a)导致的duplicate-symbol的问题 | 今是昨非的博客</title><meta name="author" content="今是昨非"><meta name="copyright" content="今是昨非"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="lib(a)导致的duplicate-symbol的问题链接：  iOS lib(.a)库冲突解决办法 iOS 两个静态库存在同名文件冲突解决方案">
<meta property="og:type" content="article">
<meta property="og:title" content="lib(a)导致的duplicate-symbol的问题">
<meta property="og:url" content="http://morganwang.cn/2016/01/07/lib(a)%E5%AF%BC%E8%87%B4%E7%9A%84duplicate-symbol%E7%9A%84%E9%97%AE%E9%A2%98/index.html">
<meta property="og:site_name" content="今是昨非的博客">
<meta property="og:description" content="lib(a)导致的duplicate-symbol的问题链接：  iOS lib(.a)库冲突解决办法 iOS 两个静态库存在同名文件冲突解决方案">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://morganwang.cn/assets/img/avatar.jpeg">
<meta property="article:published_time" content="2016-01-07T04:23:00.000Z">
<meta property="article:modified_time" content="2024-01-22T11:04:42.000Z">
<meta property="article:author" content="今是昨非">
<meta property="article:tag" content="技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://morganwang.cn/assets/img/avatar.jpeg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "lib(a)导致的duplicate-symbol的问题",
  "url": "http://morganwang.cn/2016/01/07/lib(a)%E5%AF%BC%E8%87%B4%E7%9A%84duplicate-symbol%E7%9A%84%E9%97%AE%E9%A2%98/",
  "image": "http://morganwang.cn/assets/img/avatar.jpeg",
  "datePublished": "2016-01-07T04:23:00.000Z",
  "dateModified": "2024-01-22T11:04:42.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "今是昨非",
      "url": "http://morganwang.cn"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://morganwang.cn/2016/01/07/lib(a)%E5%AF%BC%E8%87%B4%E7%9A%84duplicate-symbol%E7%9A%84%E9%97%AE%E9%A2%98/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'lib(a)导致的duplicate-symbol的问题',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/assets/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">189</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://images.unsplash.com/photo-1477346611705-65d1883cee1e);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">今是昨非的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">lib(a)导致的duplicate-symbol的问题</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">lib(a)导致的duplicate-symbol的问题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2016-01-07T04:23:00.000Z" title="发表于 2016-01-07 12:23:00">2016-01-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-22T11:04:42.000Z" title="更新于 2024-01-22 19:04:42">2024-01-22</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="lib-a-导致的duplicate-symbol的问题"><a href="#lib-a-导致的duplicate-symbol的问题" class="headerlink" title="lib(a)导致的duplicate-symbol的问题"></a>lib(a)导致的duplicate-symbol的问题</h1><p>链接：</p>
<ol>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/huizhang212/p/lipolib.html">iOS lib(.a)库冲突解决办法</a></li>
<li><a target="_blank" rel="noopener" href="http://6396006.blog.51cto.com/6386006/1364186">iOS 两个静态库存在同名文件冲突解决方案</a><span id="more"></span>
<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1></li>
</ol>
<p>首先你要确定是这个类型的错误<br><img src="http://upload-images.jianshu.io/upload_images/1208479-dfd70054470dacc0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image1"></p>
<p>然后开始，可以按照第一个链接进行修改，也可以看下面</p>
<blockquote>
<p>在引入第三方lib(.a)库时，经常会由于第三方lib库中又引入同你现有工程相同的开源代码而造成.o冲突</p>
</blockquote>
<h2 id="依次查看lib库所支持的框架类型。"><a href="#依次查看lib库所支持的框架类型。" class="headerlink" title="依次查看lib库所支持的框架类型。"></a>依次查看lib库所支持的框架类型。</h2><p>i386：模拟器；<br>armv7：iphone4；<br>armv7s：iphone5,iphone5s；<br>arm64：iphone6,iphone6p。</p>
<ol>
<li><p>首先，将冲突的那个.a文件单独拷贝到一个文件夹，然后用命令行进入到那个文件夹<br><img src="http://upload-images.jianshu.io/upload_images/1208479-5aeda51154c5fe85.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image1"></p>
</li>
<li><p>查看lib库支持的框架类型，注意下面的lib.a或者libRyFitLibrary.a是我出错的.a文件</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">admin-imac:testlib admin$ lipo -info lib.a 2 Architectures in the fat file: lib.a are: armv7</span><br><span class="line">armv7s arm64 3 admin-imac:testlib admin$</span><br></pre></td></tr></table></figure>

<p><img src="http://upload-images.jianshu.io/upload_images/1208479-76b8fee1daa76781.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image2"></p>
<p>fat file：表示该lib库文件中合并了多个框架的lib库，这里合并的有armv7 arm64。如果同时合并了模拟器的lib库，这里还会有i386的标识。　　</p>
<h2 id="分离出armv7类型的-a库"><a href="#分离出armv7类型的-a库" class="headerlink" title="分离出armv7类型的.a库"></a>分离出armv7类型的.a库</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">admin-imac:testlib admin$ lipo -extract_family armv7 -output lib_armv7.a lib.a  </span><br><span class="line">admin-imac:testlib admin$ lipo -info lib_armv7.a 3 Architectures in the fat file: lib_armv7.a are: armv7 armv7s</span><br></pre></td></tr></table></figure>

<p><img src="http://upload-images.jianshu.io/upload_images/1208479-42d7e7f5dca67900.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image3"></p>
<p>　如果发现分离出来的lib_armv7.a仍旧是fat文件，需要进行进一步分离。只有Non-fat文件才可以分离.o。所以仍然</p>
<h2 id="分离arm64类型的-a库"><a href="#分离arm64类型的-a库" class="headerlink" title="分离arm64类型的.a库"></a>分离arm64类型的.a库</h2><p>　　arm64是iOS系统最新增加的框架，按照分离armv7,armv7s的方式无论如何都无法分离出arm64版本的Non-fat文件，经过多次试验发现可以通过下面命令直接分离。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">admin-imac:testlib admin$ lipo lib.a -thin arm64 -output lib_final_arm64.a</span><br><span class="line">admin-imac:testlib admin$ lipo -info lib_final_arm64.a </span><br><span class="line">input file lib_final_arm64.a is not a fat file</span><br><span class="line">Non-fat file: lib_final_arm64.a is architecture: arm64</span><br></pre></td></tr></table></figure>

<p><img src="http://upload-images.jianshu.io/upload_images/1208479-435c45856c5c72a7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image4"></p>
<h2 id="分离目标文件-o"><a href="#分离目标文件-o" class="headerlink" title="分离目标文件.o"></a>分离目标文件.o</h2><p>通过上面的分离则可将armv7、arm64框架的lib库一一分离出来，接下来针对每个框架分别创建一个文件夹用来保存从.a库中分离出来的.o文件。其他同理<br>下面以armv7为例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">admin-imac:testlib admin$ mkdir armv72</span><br><span class="line">admin-imac:testlib admin$ cd armv73 </span><br><span class="line">admin-imac:armv7 admin$ ar -x ../lib_final_armv7.a</span><br></pre></td></tr></table></figure>

<p><img src="http://upload-images.jianshu.io/upload_images/1208479-9ea834dcdd142149.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image5"></p>
<p>到这里再看一下我最初的错误，<br><img src="http://upload-images.jianshu.io/upload_images/1208479-dfd70054470dacc0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image1"><br>看到是Reachability.o的问题，通过上面的ls命令，能够看到确实两个文件夹里都有这个.o文件。</p>
<h2 id="从分离出的-o中删除冲突的-o，所有的文件夹里的都要删除，下面只演示了一个"><a href="#从分离出的-o中删除冲突的-o，所有的文件夹里的都要删除，下面只演示了一个" class="headerlink" title="从分离出的.o中删除冲突的.o，所有的文件夹里的都要删除，下面只演示了一个"></a>从分离出的.o中删除冲突的.o，所有的文件夹里的都要删除，下面只演示了一个</h2><p><img src="http://upload-images.jianshu.io/upload_images/1208479-b7a9c8d064c0a24f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image6"></p>
<h2 id="再将其余-o文件合并成lib-o-，注意所在的文件夹"><a href="#再将其余-o文件合并成lib-o-，注意所在的文件夹" class="headerlink" title="再将其余.o文件合并成lib(.o)，注意所在的文件夹"></a>再将其余.o文件合并成lib(.o)，注意所在的文件夹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">admin-imac:arm64 admin$ libtool -static -o ../libarm64.a *.o</span><br></pre></td></tr></table></figure>

<p><img src="http://upload-images.jianshu.io/upload_images/1208479-f80f9f9acc83cd99.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image7"><br>可以看到最终多了两个，libarm64.a和libarmv7.a就是我们删除冲突文件后，新生成的.a文件</p>
<h2 id="合并最终的通用静态库"><a href="#合并最终的通用静态库" class="headerlink" title="合并最终的通用静态库"></a>合并最终的通用静态库</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">admin-imac:testlib admin$ lipo -create -output libs.a libarmv7.a libarmv7s.a libarm64.a </span><br><span class="line">admin-imac:testlib admin$ lipo -info libs.a </span><br><span class="line">Architectures in the fat file: libs.a are: armv7 armv7s arm64</span><br></pre></td></tr></table></figure>

<p><img src="http://upload-images.jianshu.io/upload_images/1208479-ed5c73d1b02f139b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image8"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://morganwang.cn">今是昨非</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://morganwang.cn/2016/01/07/lib(a)%E5%AF%BC%E8%87%B4%E7%9A%84duplicate-symbol%E7%9A%84%E9%97%AE%E9%A2%98/">http://morganwang.cn/2016/01/07/lib(a)%E5%AF%BC%E8%87%B4%E7%9A%84duplicate-symbol%E7%9A%84%E9%97%AE%E9%A2%98/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://morganwang.cn" target="_blank">今是昨非的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%8A%80%E6%9C%AF/">技术</a></div><div class="post-share"><div class="social-share" data-image="/assets/img/avatar.jpeg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2016/01/28/%E5%8A%A8%E7%94%BB%E6%95%88%E6%9E%9C%EF%BC%9AsnapshotViewAfterScreenUpdates%E7%9A%84%E4%BD%BF%E7%94%A8/" title="动画效果：snapshotViewAfterScreenUpdates的使用"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">动画效果：snapshotViewAfterScreenUpdates的使用</div></div><div class="info-2"><div class="info-item-1">动画动画：复杂动画的实现：首先要拆分，明确你自己要实现的效果是什么，然后开始拆分，第一步实现什么，然后实现什么…，怎么样链接起来。把复杂的动画拆分成一个个小步骤，然后一步步实现就可以了。     snapshotViewAfterScreenUpdates(_:) 这个方法我在做拖拽tableView的item的时候(eg: SystemPreference)看到的，感觉用来做动画很好用。相当于截个图，然后拿着这个截图，实现各种动画效果。eg:   如果你是一个电商项目，将商品加入购物车，这个动画就可以用这个来实现（Ps：我记得京东还是淘宝久有这个效果，但是我却又找不到了），点击加入购物车，然后对商品生成一个快照，然后缩小移动到购物车（还可以加入旋转的动画），到购物车的位置，移除。Perfect！   我做的这个项目，读信的过程就是用这个效果实现，点击信封，然后生成快照，然后快照位移到屏幕中间，消失，然后信封详情出现。   实现 首先，定义动画效果的实现：   查看信件：a. 点击信件，然后生成信件快照; b.信件快照位移到屏幕中央；同时信件详情出现，信件快照消失； 关闭详情：a...</div></div></div></a><a class="pagination-related" href="/2016/01/07/MagicalRecord%E7%9A%84%E4%BD%BF%E7%94%A8/" title="MagicalRecord的使用"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">MagicalRecord的使用</div></div><div class="info-2"><div class="info-item-1">创建数据库1.  首先分析清楚自己需要什么 我的目的是要缓存信件列表界面，新建列表界面的model就是letter，所以我需要一个Letter的实体(entity)，那这个Letter有哪些属性呢？写信的人(sender)、信的内容(content)、信的时间(dateString)、信的已读未读状态(isRead)、发信还是收信(incoming)；所以我Letter的entity创建之后是这样：     这样就好了吗，并没有，如果是普通的展示界面，只有letter的实体，这样就足够了；但是对于我的这个项目来说，是展示信件的，是比较私人的，我缓存的信件列表应该只有我能看到，如果别人在我的手机上登陆了呢？因为我没有做区分，所以，当他登入的时候，他能看到我的数据，因为数据是缓存在手机上的！   所以，我需要一个User的Entity，这个User的Entity的目的是：跟Letter绑定，保证每个人都看到自己应该看到的；user有两个attribute：accout和writeName，(正常情况下应该是uid，但是我的这个是比较简单，所以没有uid)；    紧接着问题是，Let...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/04/19/Mac%E6%89%AB%E6%8F%8FiOS%E6%8F%8F%E8%BF%B0%E6%96%87%E4%BB%B6/" title="Python实现提醒iOS描述文件有效期"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-19</div><div class="info-item-2">Python实现提醒iOS描述文件有效期</div></div><div class="info-2"><div class="info-item-1">Python实现提醒iOS描述文件有效期背景公司企业APP描述文件过期，没有提醒，导致当天出现不可用的问题。 为了避免再发生类似的问题，笔者想要写一个Python脚本，读取描述文件，获取有效期，设置提醒，且自动运行。    实现首先再来理一下思路，所有的描述文件都在~/Library/MobileDevice/Provisioning Profiles/目录下，但是里面的内容通常不会自动删除，过期的或者重复的都在这个目录中，而且这个目录下的文件名是uuid命名的和Xcode中的文件名字也不能直接对应，所以一眼看去，只能用一个字形容：乱。 如果账号是管理员，直接登录在电脑上，项目中用的自动管理描述文件的，还好一些，现在会自动续期。但是如果账号是开发者，发布的描述文件没有权限用自动管理的，就需要注意这个描述文件有效期的问题。 再来理一下思路，想要的是一个读取描述文件夹下所有描述文件，获取描述文件中的内容，根据有效期，设置提醒，且自动运行的脚本。 那这里面最重要的是什么？是获取描述文件的内容，这关系到这个思路是否可行。 获取描述文件的内容首先，来看下，描述文件的格式是uuid.mobi...</div></div></div></a><a class="pagination-related" href="/2018/12/06/Namespacing%20Swift%20code%20with%20nested%20types/" title="Swift代码中的嵌套命名法"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2018-12-06</div><div class="info-item-2">Swift代码中的嵌套命名法</div></div><div class="info-2"><div class="info-item-1">Swift代码中的嵌套命名法Swift支持与其他类型嵌套命名，尽管它还没有专用的命名关键词。下面我们来看看，如何使用类型嵌套来优化我们代码的结构。 大多数Swift开发者习惯于用类型在结构上的实际名字累命名。例如：PostTextFormatterOption(一个Text Formatter类型的用于format Posts的Option)。这可能是因为我们在Objective-C &amp; C中，养成的别无选择的可怕命名习惯，被我们带到了Swift里。 下面我们用上面提到的类型作为例子，来看下Post、PostTextFormatter以及PostTextFormatterOption的实现：   123456789101112131415161718192021222324252627struct Post &#123;    let id: Int    let author: User    let title: String    let text: String&#125;class PostTextFormatter &#123;    private le...</div></div></div></a><a class="pagination-related" href="/2016/06/01/%E5%8D%8A%E9%80%8F%E6%98%8E%E9%BB%91%E8%89%B2%E8%83%8C%E6%99%AF%E7%9A%84%E5%AE%9E%E7%8E%B0/" title="半透明效果的实现"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2016-06-01</div><div class="info-item-2">半透明效果的实现</div></div><div class="info-2"><div class="info-item-1">类似下图这样一个半透明效果的实现：   起因：我今天在推酷上面闲逛的时候，看到了这样一篇文章用 Swift 编写面向协议的视图，里面介绍的是一个颤动的效果，分别采用直接实现、category实现以及protocol extension实现，来表现swift面向协议的强大，推荐大家仔细看看。 在文章的末尾，附有一个链接，是透明视图控制器及背景遮罩，我点开看了一下，是一个采用protocol extension实现的类似图一的半透明的实现；只不过是swift的。 然后我仔细回想了一下，类似这种效果的需求在开发中不少，但是每次我实现都是自定义一个view然后用动画效果实现，现在想想这样不但繁琐，而且很low，有木有。 然后想想上面的那个实现，我把它翻译成OC的怎么样，能不能使用，OC里面是没有protocol extension的，那我就直接用category实现，至少比每次实现都重写方便。 then，here is the result.  DimBackground-OC里面很简单，使用的时候只需要导入这两个文件，然后使用即可。 但是需要注意的是，要present出来的那个界面，这...</div></div></div></a><a class="pagination-related" href="/2019/09/08/CocoaPods%E7%A7%81%E6%9C%89%E5%BA%93%E7%94%9F%E6%88%90/" title="CocoaPods私有库生成"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-09-08</div><div class="info-item-2">CocoaPods私有库生成</div></div><div class="info-2"><div class="info-item-1">CocoaPods私有库生成</div></div></div></a><a class="pagination-related" href="/2022/04/21/Algorithem_Merge_Two_Binary_Trees/" title="Algorithem_Merge Two Binary Trees"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-21</div><div class="info-item-2">Algorithem_Merge Two Binary Trees</div></div><div class="info-2"><div class="info-item-1">Algorithem_Merge Two Binary TreesYou are given two binary trees root1 and root2. Imagine that when you put one of them to cover the other, some nodes of the two trees are overlapped while the others are not. You need to merge the two trees into a new binary tree. The merge rule is that if two nodes overlap, then sum node values up as the new value of the merged node. Otherwise, the NOT null node will be used as the node of the new tree.   Return the merged tree. Note: The merging process must...</div></div></div></a><a class="pagination-related" href="/2019/10/06/ProtocolBuf%20Swift%20%E4%BD%BF%E7%94%A8/" title="ProtocolBuf Swift 使用"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-10-06</div><div class="info-item-2">ProtocolBuf Swift 使用</div></div><div class="info-2"><div class="info-item-1">ProtocolBuf Swift 使用环境搭建Mac安装swift-protobuf   1brew install swift-protobuf  使用Podfile集成Xcode再Podfile里添加 1pod &#x27;SwiftProtobuf&#x27;  然后在此目录下打开terminal运行 1Pod install  使用新建BookInfo.proto 1234567syntax = &quot;proto3&quot;;message BookInfo &#123;   int64 id = 1;   string title = 2;   string author = 3;&#125;  在此文件同目录下执行下面命令，生成.swift文件 1protoc --swift_out=. BookInfo.proto  将.swift文件拖入工程，编译一下，使用 123456789101112131415161718192021// Create a BookInfo object and populate it:var info = BookInfo()i...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/assets/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">今是昨非</div><div class="author-info-description">技术分享、生活感悟</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">189</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mokong"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/mokong" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://x.com/morgan2015_wang" target="_blank" title="Twitter"><i class="fab fa-X"></i></a><a class="social-icon" href="mailto:mokong.2015.1992@email.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#lib-a-%E5%AF%BC%E8%87%B4%E7%9A%84duplicate-symbol%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.</span> <span class="toc-text">lib(a)导致的duplicate-symbol的问题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E"><span class="toc-number">2.</span> <span class="toc-text">说明</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E6%AC%A1%E6%9F%A5%E7%9C%8Blib%E5%BA%93%E6%89%80%E6%94%AF%E6%8C%81%E7%9A%84%E6%A1%86%E6%9E%B6%E7%B1%BB%E5%9E%8B%E3%80%82"><span class="toc-number">2.1.</span> <span class="toc-text">依次查看lib库所支持的框架类型。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%A6%BB%E5%87%BAarmv7%E7%B1%BB%E5%9E%8B%E7%9A%84-a%E5%BA%93"><span class="toc-number">2.2.</span> <span class="toc-text">分离出armv7类型的.a库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%A6%BBarm64%E7%B1%BB%E5%9E%8B%E7%9A%84-a%E5%BA%93"><span class="toc-number">2.3.</span> <span class="toc-text">分离arm64类型的.a库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%A6%BB%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6-o"><span class="toc-number">2.4.</span> <span class="toc-text">分离目标文件.o</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8E%E5%88%86%E7%A6%BB%E5%87%BA%E7%9A%84-o%E4%B8%AD%E5%88%A0%E9%99%A4%E5%86%B2%E7%AA%81%E7%9A%84-o%EF%BC%8C%E6%89%80%E6%9C%89%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%E9%87%8C%E7%9A%84%E9%83%BD%E8%A6%81%E5%88%A0%E9%99%A4%EF%BC%8C%E4%B8%8B%E9%9D%A2%E5%8F%AA%E6%BC%94%E7%A4%BA%E4%BA%86%E4%B8%80%E4%B8%AA"><span class="toc-number">2.5.</span> <span class="toc-text">从分离出的.o中删除冲突的.o，所有的文件夹里的都要删除，下面只演示了一个</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%8D%E5%B0%86%E5%85%B6%E4%BD%99-o%E6%96%87%E4%BB%B6%E5%90%88%E5%B9%B6%E6%88%90lib-o-%EF%BC%8C%E6%B3%A8%E6%84%8F%E6%89%80%E5%9C%A8%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">2.6.</span> <span class="toc-text">再将其余.o文件合并成lib(.o)，注意所在的文件夹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E6%9C%80%E7%BB%88%E7%9A%84%E9%80%9A%E7%94%A8%E9%9D%99%E6%80%81%E5%BA%93"><span class="toc-number">2.7.</span> <span class="toc-text">合并最终的通用静态库</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/22/Google%20Antigravity%20%E7%99%BB%E5%BD%95%E4%B8%8D%E4%BA%86%E8%A7%A3%E5%86%B3/" title="Google Antigravity 登录不了解决">Google Antigravity 登录不了解决</a><time datetime="2026-01-22T02:38:00.000Z" title="发表于 2026-01-22 10:38:00">2026-01-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/21/%E8%BF%9E%E5%A4%9C%E5%BC%80%E5%8F%91%E4%BA%86%E4%B8%80%E4%B8%AA%20Mac%20%E4%B8%8A%E4%B9%85%E5%9D%90%E6%8F%90%E9%86%92%E5%B7%A5%E5%85%B7/" title="连夜开发了一个 Mac 上久坐提醒工具">连夜开发了一个 Mac 上久坐提醒工具</a><time datetime="2026-01-21T13:45:00.000Z" title="发表于 2026-01-21 21:45:00">2026-01-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/20/%E5%85%B3%E4%BA%8E%20AI%20%E4%B8%8E%E5%BC%80%E5%8F%91/" title="关于 AI 与开发">关于 AI 与开发</a><time datetime="2026-01-20T11:41:00.000Z" title="发表于 2026-01-20 19:41:00">2026-01-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/16/%E5%88%B6%E4%BD%9C%E8%87%AA%E5%B7%B1%E8%A1%A8%E6%83%85%E5%8C%85/" title="制作自己表情包">制作自己表情包</a><time datetime="2026-01-16T02:21:00.000Z" title="发表于 2026-01-16 10:21:00">2026-01-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/13/%E9%B8%BF%E8%92%99%E6%88%AA%E5%9B%BE%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7/" title="鸿蒙截图生成工具">鸿蒙截图生成工具</a><time datetime="2025-10-13T07:24:00.000Z" title="发表于 2025-10-13 15:24:00">2025-10-13</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2026 By 今是昨非</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 5.4.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div><div class="footer_custom_text"><span>日出江花红胜火，春来江水绿如蓝，能不忆江南</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><div class="js-pjax"></div><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      false
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>