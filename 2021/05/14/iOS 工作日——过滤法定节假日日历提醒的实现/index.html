<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>iOS å·¥ä½œæ—¥â€”â€”è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥æ—¥å†æé†’çš„å®ç° | ä»Šæ˜¯æ˜¨éçš„åšå®¢</title><meta name="author" content="ä»Šæ˜¯æ˜¨é"><meta name="copyright" content="ä»Šæ˜¯æ˜¨é"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="iOS å·¥ä½œæ—¥â€”â€”è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥æ—¥å†æé†’çš„å®ç°èƒŒæ™¯ç¬”è€…äº”ä¸€ä¹‹å‰è¡¥ç­çš„æ—¶å€™ï¼Œé—¹é’Ÿæ²¡å“ï¼Œæ—©ä¸Šå·®ç‚¹è¿Ÿåˆ°äº†ã€‚ç¬”è€…é—¹é’Ÿè®¾ç½®çš„æ˜¯å‘¨ä¸€åˆ°å‘¨äº”ï¼ŒiPhoneæ²¡æœ‰æ³•å®šèŠ‚å‡æ—¥çš„è®¾ç½®ï¼Œä¹Ÿæ²¡æœ‰è¡¥ä¼‘çš„è®¾ç½®ã€‚ã€‚ã€‚ã€‚ç¬”è€…å°±æƒ³è¦è§£å†³è¿™ä¸ªç—›ç‚¹ï¼Œæ¢¦æƒ³ç€ï¼Œè¦æ˜¯åšå‡ºæ¥äº†ï¼Œå‘å¸ƒåˆ°å•†åº—ï¼Œä»æ­¤èµ°ä¸Šäººç”Ÿå·…å³°ï¼Œèµ¢å–ç™½ã€‚ã€‚ã€‚ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS å·¥ä½œæ—¥â€”â€”è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥æ—¥å†æé†’çš„å®ç°">
<meta property="og:url" content="http://morganwang.cn/2021/05/14/iOS%20%E5%B7%A5%E4%BD%9C%E6%97%A5%E2%80%94%E2%80%94%E8%BF%87%E6%BB%A4%E6%B3%95%E5%AE%9A%E8%8A%82%E5%81%87%E6%97%A5%E6%97%A5%E5%8E%86%E6%8F%90%E9%86%92%E7%9A%84%E5%AE%9E%E7%8E%B0/index.html">
<meta property="og:site_name" content="ä»Šæ˜¯æ˜¨éçš„åšå®¢">
<meta property="og:description" content="iOS å·¥ä½œæ—¥â€”â€”è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥æ—¥å†æé†’çš„å®ç°èƒŒæ™¯ç¬”è€…äº”ä¸€ä¹‹å‰è¡¥ç­çš„æ—¶å€™ï¼Œé—¹é’Ÿæ²¡å“ï¼Œæ—©ä¸Šå·®ç‚¹è¿Ÿåˆ°äº†ã€‚ç¬”è€…é—¹é’Ÿè®¾ç½®çš„æ˜¯å‘¨ä¸€åˆ°å‘¨äº”ï¼ŒiPhoneæ²¡æœ‰æ³•å®šèŠ‚å‡æ—¥çš„è®¾ç½®ï¼Œä¹Ÿæ²¡æœ‰è¡¥ä¼‘çš„è®¾ç½®ã€‚ã€‚ã€‚ã€‚ç¬”è€…å°±æƒ³è¦è§£å†³è¿™ä¸ªç—›ç‚¹ï¼Œæ¢¦æƒ³ç€ï¼Œè¦æ˜¯åšå‡ºæ¥äº†ï¼Œå‘å¸ƒåˆ°å•†åº—ï¼Œä»æ­¤èµ°ä¸Šäººç”Ÿå·…å³°ï¼Œèµ¢å–ç™½ã€‚ã€‚ã€‚ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://morganwang.cn/assets/img/avatar.jpeg">
<meta property="article:published_time" content="2021-05-14T08:54:00.000Z">
<meta property="article:modified_time" content="2024-01-22T11:04:42.000Z">
<meta property="article:author" content="ä»Šæ˜¯æ˜¨é">
<meta property="article:tag" content="æŠ€æœ¯">
<meta property="article:tag" content="iOS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://morganwang.cn/assets/img/avatar.jpeg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "iOS å·¥ä½œæ—¥â€”â€”è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥æ—¥å†æé†’çš„å®ç°",
  "url": "http://morganwang.cn/2021/05/14/iOS%20%E5%B7%A5%E4%BD%9C%E6%97%A5%E2%80%94%E2%80%94%E8%BF%87%E6%BB%A4%E6%B3%95%E5%AE%9A%E8%8A%82%E5%81%87%E6%97%A5%E6%97%A5%E5%8E%86%E6%8F%90%E9%86%92%E7%9A%84%E5%AE%9E%E7%8E%B0/",
  "image": "http://morganwang.cn/assets/img/avatar.jpeg",
  "datePublished": "2021-05-14T08:54:00.000Z",
  "dateModified": "2024-01-22T11:04:42.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "ä»Šæ˜¯æ˜¨é",
      "url": "http://morganwang.cn"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://morganwang.cn/2021/05/14/iOS%20%E5%B7%A5%E4%BD%9C%E6%97%A5%E2%80%94%E2%80%94%E8%BF%87%E6%BB%A4%E6%B3%95%E5%AE%9A%E8%8A%82%E5%81%87%E6%97%A5%E6%97%A5%E5%8E%86%E6%8F%90%E9%86%92%E7%9A%84%E5%AE%9E%E7%8E%B0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'iOS å·¥ä½œæ—¥â€”â€”è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥æ—¥å†æé†’çš„å®ç°',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/assets/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">188</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://images.unsplash.com/photo-1477346611705-65d1883cee1e);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">ä»Šæ˜¯æ˜¨éçš„åšå®¢</span></a><a class="nav-page-title" href="/"><span class="site-name">iOS å·¥ä½œæ—¥â€”â€”è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥æ—¥å†æé†’çš„å®ç°</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  è¿”å›é¦–é¡µ</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">iOS å·¥ä½œæ—¥â€”â€”è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥æ—¥å†æé†’çš„å®ç°</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2021-05-14T08:54:00.000Z" title="å‘è¡¨äº 2021-05-14 16:54:00">2021-05-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-01-22T11:04:42.000Z" title="æ›´æ–°äº 2024-01-22 19:04:42">2024-01-22</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="iOS-å·¥ä½œæ—¥â€”â€”è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥æ—¥å†æé†’çš„å®ç°"><a href="#iOS-å·¥ä½œæ—¥â€”â€”è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥æ—¥å†æé†’çš„å®ç°" class="headerlink" title="iOS å·¥ä½œæ—¥â€”â€”è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥æ—¥å†æé†’çš„å®ç°"></a>iOS å·¥ä½œæ—¥â€”â€”è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥æ—¥å†æé†’çš„å®ç°</h1><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>ç¬”è€…äº”ä¸€ä¹‹å‰è¡¥ç­çš„æ—¶å€™ï¼Œé—¹é’Ÿæ²¡å“ï¼Œæ—©ä¸Šå·®ç‚¹è¿Ÿåˆ°äº†ã€‚ç¬”è€…é—¹é’Ÿè®¾ç½®çš„æ˜¯å‘¨ä¸€åˆ°å‘¨äº”ï¼ŒiPhoneæ²¡æœ‰æ³•å®šèŠ‚å‡æ—¥çš„è®¾ç½®ï¼Œä¹Ÿæ²¡æœ‰è¡¥ä¼‘çš„è®¾ç½®ã€‚ã€‚ã€‚ã€‚ç¬”è€…å°±æƒ³è¦è§£å†³è¿™ä¸ªç—›ç‚¹ï¼Œæ¢¦æƒ³ç€ï¼Œè¦æ˜¯åšå‡ºæ¥äº†ï¼Œå‘å¸ƒåˆ°å•†åº—ï¼Œä»æ­¤èµ°ä¸Šäººç”Ÿå·…å³°ï¼Œèµ¢å–ç™½ã€‚ã€‚ã€‚ã€‚</p>
<span id="more"></span>

<p>YYè¿‡åï¼Œå›è¿‡å¤´æ¥ï¼Œæ¥ç€è°ƒç ”ï¼Œæ³•å®šèŠ‚å‡æ—¥é—¹é’Ÿçš„å®ç°ï¼Œç¬”è€…æŸ¥æ‰¾äº†å¾ˆå¤šèµ„æ–™ï¼Œå‘ç°ä¸ç”¨åšæ¢¦äº†ã€‚é¦–å…ˆiOSç¨‹åºæ·»åŠ é—¹é’Ÿåˆ°æ—¶é’ŸAPPæ˜¯ä¸å…è®¸çš„ã€‚ã€‚ã€‚å…¶æ¬¡ï¼ŒiOSä¹Ÿæ²¡æœ‰æ³•å®šèŠ‚å‡æ—¥çš„åˆ¤æ–­ã€‚ã€‚ã€‚ã€‚æ‰€ä»¥ä¸ç”¨YYäº†ã€‚ä½†æ˜¯ç¬”è€…è¿˜çœŸæ‰¾åˆ°äº†<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/138316230">iOSè‡ªå®šä¹‰é—¹é’Ÿ â€”â€” ä¸­å›½æ³•å®šèŠ‚å‡æ—¥(å‡çº§ç‰ˆï¼‰</a>è¿™ä¸ªï¼Œé€šè¿‡å¿«æ·æŒ‡ä»¤è‡ªå®šä¹‰é—¹é’Ÿï¼Œå¯ä»¥å®ç°è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥ã€‚åŸç†æ˜¯ï¼šè®¾ç½®é—¹é’Ÿï¼Œç„¶åé€šè¿‡å¿«æ·æŒ‡ä»¤çš„è‡ªåŠ¨æ‰§è¡Œï¼Œæ¯å¤©åœ¨é—¹é’Ÿæ—¶é—´å‰ï¼Œé€šè¿‡è®¢é˜…çš„åˆ«äººç»´æŠ¤çš„æ—¥å†æˆ–è€…è‡ªå·±æœ¬åœ°ç»´æŠ¤æ—¥å†ï¼Œåˆ¤æ–­å½“å¤©æ˜¯å¦æ˜¯èŠ‚å‡æ—¥ï¼Œç„¶åå†³å®šå½“å¤©çš„é—¹é’Ÿæ˜¯å¦æ‰“å¼€ã€å…³é—­ã€‚ç¬”è€…ä¸å¾—ä¸èµä¸€ä¸ªï¼ŒçœŸçš„ä¼˜ç§€ã€‚</p>
<p>è™½ç„¶ç¬”è€…çš„å‘è´¢æ¢¦å¤­æŠ˜äº†ã€‚ã€‚ã€‚ä½†ç¬”è€…æƒ³åˆ°äº†å¦ä¸€ä¸ªï¼Œè™½ç„¶iOSç¨‹åºä¸èƒ½ç›´æ¥æ·»åŠ é—¹é’Ÿï¼Œä½†æ˜¯iOSç¨‹åºå¯ä»¥ç›´æ¥æ·»åŠ æ—¥å†æé†’å•Šï¼Œæ¯”å¦‚é¢„çº¦ç›´æ’­æˆ–è€…é¢„çº¦æŠ¢è´­çš„ï¼Œå…¶å®éƒ½æ˜¯æ·»åŠ äº‹ä»¶åˆ°æ—¥å†ä¸­ï¼Œç„¶ååœ¨æŒ‡å®šçš„æ—¶é—´ï¼Œå¼¹å‡ºæ¥æ—¥å†æé†’å»åšä»€ä¹ˆï¼Œä¹Ÿä¸æ˜¯ä¸å¯ä»¥ç”¨ã€‚é‚£æ˜¯å¦èƒ½ç”¨æ—¥å†æé†’æ¥å®ç°ï¼Œæ³•å®šå·¥ä½œæ—¥çš„æé†’å‘¢ã€‚ã€‚ã€‚æ¯”å¦‚æ¯ä¸ªå·¥ä½œæ—¥æé†’æ‰“å¡ã€‚æˆ–è€…åªé’ˆå¯¹èŠ‚å‡æ—¥è¡¥ç­æé†’ï¼Œæ¯ä¸ªè¡¥ç­å‰å¤©æ™šä¸Šæé†’è®¾ç½®é—¹é’Ÿã€‚</p>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>iPhone æ·»åŠ æ—¥å†æé†’çš„å®ç°å¾ˆç®€å•ï¼Œéš¾çš„åœ°æ–¹è¿˜æ˜¯åœ¨äºå›½å†…æ³•å®šèŠ‚å‡æ—¥çš„åˆ¤æ–­ï¼Œæ€ä¹ˆèƒ½è¿‡æ»¤æ‰æ³•å®šèŠ‚å‡æ—¥ï¼Œå®ç°çœŸæ­£çº¯å·¥ä½œæ—¥çš„æ—¶å€™æé†’ï¼Ÿ</p>
<h3 id="ç¬¬ä¸€æ­¥ï¼Œå…ˆåˆ›å»ºå‘¨ä¸€åˆ°å‘¨äº”çš„é‡å¤äº‹ä»¶"><a href="#ç¬¬ä¸€æ­¥ï¼Œå…ˆåˆ›å»ºå‘¨ä¸€åˆ°å‘¨äº”çš„é‡å¤äº‹ä»¶" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼Œå…ˆåˆ›å»ºå‘¨ä¸€åˆ°å‘¨äº”çš„é‡å¤äº‹ä»¶"></a>ç¬¬ä¸€æ­¥ï¼Œå…ˆåˆ›å»ºå‘¨ä¸€åˆ°å‘¨äº”çš„é‡å¤äº‹ä»¶</h3><p>ç¬”è€…åˆè°ƒç ”äº†ä¸€ç•ªï¼Œå‘ç°æ—¥å†æé†’ä¸­æœ‰ä¸€ä¸ª<code>EKRecurrenceRule</code>çš„è§„åˆ™é€‰é¡¹ï¼Œæ˜¯å¦èƒ½ç”¨è¿™ä¸ªæ¥å®ç°å‘¢ï¼Ÿ</p>
<p><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/eventkit/ekrecurrencerule">EKRecurrenceRule</a>æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>å®˜æ–¹è§£é‡Šï¼š</p>
<blockquote>
<p>A class that describes the recurrence pattern for a recurring event.</p>
</blockquote>
<p>ç¬”è€…ç†è§£ï¼š<br>é‡å¤äº‹ä»¶çš„é‡å¤è§„åˆ™ã€‚ç®€å•çš„è¯´ï¼Œå°±æ˜¯å®šä¹‰ä¸€ä¸ªé‡å¤è§„åˆ™ï¼Œæ¯”å¦‚æ¯å‘¨é‡å¤ã€æ¯å¤©é‡å¤ã€æ¯éš”å‡ å¤©é‡å¤ç±»ä¼¼çš„ï¼Œç„¶åæŒ‰ç…§è¿™ä¸ªè§„åˆ™æ·»åŠ äº‹ä»¶ã€‚</p>
<p>çœ‹åˆ°è¿™ä¸ªï¼Œç¬”è€…çš„å¿ƒå‡‰äº†åŠæˆªï¼Œé‡å¤çš„è§„åˆ™ï¼Œå¯¹äºå›½å†…æ³•å®šèŠ‚å‡æ—¥æ¥è¯´ã€‚ã€‚ã€‚ã€‚é™¤äº†äº”ä¸€ã€å›½åº†ã€å…ƒæ—¦ä¹‹å¤–ï¼Œå†œå†çš„èŠ‚æ—¥é‡å¤çš„è§„åˆ™æ‰¾ä¸åˆ°ã€‚ã€‚ã€‚æ€ä¹ˆåŠï¼Ÿç¬”è€…å¯»æ€ç€éƒ½åˆ°è¿™ä¸€æ­¥äº†ï¼Œå°±å…ˆåšä¸ªå‘¨ä¸€åˆ°å‘¨äº”çš„ï¼Œä¹Ÿç®—æ˜¯éœ€æ±‚å®Œæˆäº†åŠä¸ªï¼Œå·¥ä½œæ—¥çš„é‚£éƒ¨åˆ†å®Œæˆäº†ï¼Œå‰©ä¸‹çš„é‚£éƒ¨åˆ†è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥å’Œè¡¥ä¼‘ï¼Œæ…¢æ…¢çœ‹ï¼Œåˆä¸æ˜¯ä¸ç”¨ğŸ˜‚</p>
<p>å…ˆæ¥çœ‹è®¾ç½®æ¯å‘¨ä¸€åˆ°å‘¨äº”çš„å¾ªç¯æ—¥å†äº‹ä»¶</p>
<p><strong>æ·»åŠ æ—¥å†äº‹ä»¶</strong><br>æ·»åŠ æ—¥å†äº‹ä»¶çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>è·å–è¯»å†™æ—¥å†æƒé™</li>
<li>åˆ›å»ºå•ç‹¬çš„æ—¥å†</li>
<li>ç”Ÿæˆå‘¨ä¸€åˆ°å‘¨äº”çš„è§„åˆ™</li>
<li>æ ¹æ®æ ‡é¢˜ã€åœ°å€ã€è§„åˆ™å’Œæ—¶é—´ç”Ÿæˆæ—¥å†äº‹ä»¶</li>
<li>æ·»åŠ äº‹ä»¶åˆ°æ—¥å† åˆ¤æ–­ç”Ÿæˆçš„äº‹ä»¶æ˜¯å¦å·²ç»æ·»åŠ ï¼Œå·²æ·»åŠ åˆ™ä¸æ“ä½œï¼Œæ²¡æ·»åŠ åˆ™æ·»åŠ </li>
</ol>
<p>ä¸‹é¢ä¸€æ­¥æ­¥æ¥çœ‹ï¼š</p>
<ol>
<li><p>è·å–è¯»å†™æ—¥å†æƒé™</p>
<p> é¦–å…ˆéœ€è¦åœ¨plistä¸­æ·»åŠ <code>Privacy - Calendars Usage Description</code>æƒé™ï¼Œç„¶åä½¿ç”¨ä¸‹é¢ä»£ç ç”³è¯·æƒé™</p>
 <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">lazy</span> <span class="keyword">fileprivate</span> <span class="keyword">var</span> store <span class="operator">=</span> <span class="type">EKEventStore</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: utils</span></span><br><span class="line"><span class="comment">// ç”³è¯·æ—¥å†æƒé™</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">requestEventAuth</span>(<span class="keyword">_</span> <span class="params">callback</span>:((<span class="type">Bool</span>) -&gt; <span class="type">Void</span>)<span class="operator">?</span>)</span> &#123;</span><br><span class="line">    store.requestAccess(to: <span class="type">EKEntityType</span>.event) &#123; granted, error <span class="keyword">in</span></span><br><span class="line">        callback<span class="operator">?</span>(granted)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<ol start="2">
<li><p>åˆ›å»ºå•ç‹¬çš„æ—¥å†</p>
<p> ç”¨äºä¿è¯ä¸å’Œå…¶å®ƒæ—¥å†å†²çªï¼Œè€Œä¸”ä¸æ˜¾ç¤ºæˆ–è€…ç§»é™¤æ—¶æ–¹ä¾¿ï¼Œå»ºè®®æ¯ä¸ªè‡ªå®šä¹‰æ—¥å†äº‹ä»¶çš„éƒ½å•ç‹¬å®šä¹‰ä¸€ä¸ªæ—¥å†ã€‚</p>
<p> å¬èµ·æ¥æœ‰äº›ç»•ï¼Œæ‰“å¼€iPhoneï¼Œæ‰“å¼€æ—¥å†ï¼Œç„¶åç‚¹å‡»åº•éƒ¨ä¸­é—´çš„æ—¥å†æŒ‰é’®ï¼Œå°±èƒ½çœ‹åˆ°è‡ªå·±çš„æ‰€æœ‰æ—¥å†ã€‚çœ‹å›¾å¦‚ä¸‹ï¼Œâ€è‡ªå®šä¹‰çš„äº‹é¡¹æ—¥å†â€å³æ˜¯ç¬”è€…è‡ªå®šä¹‰çš„æ—¥å†ï¼Œç¬”è€…æ‰€æ·»åŠ çš„æ—¥å†äº‹ä»¶éƒ½ä¼šåœ¨è¿™ä¸ªæ—¥å†ä¸­ï¼Œå¦‚æœä¸æƒ³è¦çœ‹åˆ°è¿™äº›äº‹ä»¶ï¼Œå¯ä»¥ç›´æ¥æŠŠå‰é¢çš„å‹¾é€‰å»é™¤ï¼Œæ—¥å†ä¸­å°±ä¸ä¼šæ˜¾ç¤ºè‡ªå®šä¹‰çš„æ—¥å†äº‹ä»¶äº†ã€‚æˆ–è€…æƒ³è¦åˆ é™¤è¿™ä¸ªæ—¥å†ä¸­çš„æ‰€æœ‰äº‹ä»¶æ—¶ï¼Œåªéœ€è¦æŠŠè¿™ä¸ªæ—¥å†åˆ æ‰å³å¯ï¼Œä¸éœ€è¦ä¸€æ¡æ¡äº‹ä»¶åˆ é™¤ï¼Œç‚¹å‡»å³è¾¹çš„æç¤ºæŒ‰é’®ï¼Œç„¶åæ»‘åŠ¨åˆ°æœ€ä¸‹æ–¹å°±æœ‰åˆ é™¤æ—¥å†çš„æŒ‰é’®ã€‚</p>
<p> Psï¼šé»˜é»˜çš„åæ§½ï¼Œä¸çŸ¥é“ä¸ºå•¥é¢„çº¦æŠ¢è´­å’Œé¢„çº¦ç›´æ’­æé†’çš„ï¼Œä¸å•ç‹¬å»ºä¸€ä¸ªæ—¥å†ã€‚ã€‚ã€‚ã€‚ç¬”è€…é¢„çº¦äº†ä¹‹åæ„Ÿè§‰çƒ¦ï¼Œæ¯æ¬¡éƒ½å¾—æ‰‹åŠ¨å»åˆ é™¤äº‹ä»¶</p>
 <img src="https://i.loli.net/2021/05/13/S9Hgadze8hlPAYD.jpg" width="50%" height='50%'>

<p> åˆ›å»ºæ—¥å†çš„ä»£ç å¦‚ä¸‹ï¼Œæ³¨æ„calendarçš„sourceçš„è®¾ç½®ï¼Œsourceè®¾ç½®ä¸ºä»€ä¹ˆï¼Œæœ€åæ·»åŠ çš„æ—¥å†ä¼šæ˜¾ç¤ºåœ¨å“ªä¸ªåœ°æ–¹</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæ–°çš„æ—¥å†</span></span><br><span class="line">func createNewCalendar() &#123;</span><br><span class="line">    guard let calendarId = <span class="built_in">MKCalendarReminderUtil</span>.userDefaultsSaveStr(kCustomCalendarId),</span><br><span class="line">          let _ = store.calendar(withIdentifier: calendarId) <span class="keyword">else</span> &#123; <span class="comment">// è¯´æ˜æœ¬åœ°å·²ç»åˆ›å»ºäº†å½“å‰æ—¥å†</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    let calendar = EKCalendar(<span class="keyword">for</span>: EKEntityType.event, eventStore: store)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> store.sources &#123;</span><br><span class="line">        <span class="keyword">if</span> item.title == <span class="string">&quot;iCloud&quot;</span> || item.title == <span class="string">&quot;Default&quot;</span> &#123;</span><br><span class="line">            calendar.source = item</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    calendar.title = <span class="string">&quot;è‡ªå®šä¹‰çš„äº‹é¡¹æ—¥å†&quot;</span> <span class="comment">// è‡ªå®šä¹‰æ—¥å†æ ‡é¢˜</span></span><br><span class="line">    calendar.cgColor = <span class="built_in">UIColor</span>.systemPurple.cgColor <span class="comment">// è‡ªå®šä¹‰æ—¥å†é¢œè‰²</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        try store.saveCalendar(calendar, commit: <span class="literal">true</span>)</span><br><span class="line">        <span class="built_in">MKCalendarReminderUtil</span>.saveToUserDefaults(kCustomCalendarId, valueStr: calendar.calendarIdentifier)</span><br><span class="line">    &#125;</span><br><span class="line">    catch &#123;</span><br><span class="line">        print(error)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>ç”Ÿæˆå‘¨ä¸€åˆ°å‘¨äº”çš„è§„åˆ™</p>
<p>ä½¿ç”¨<code>EKRecurrenceRule</code>ç”Ÿæˆæ¯å‘¨ä¸€åˆ°å‘¨äº”é‡å¤çš„è§„åˆ™ã€‚<code>EKRecurrenceRule</code>çš„ä½¿ç”¨å¦‚ä¸‹ï¼Œå…¶ä¸­<code>EKRecurrenceRule(recurrenceWith:interval:daysOfTheWeek:daysOfTheMonth:monthsOfTheYear:weeksOfTheYear:daysOfTheYear:setPositions:end:)</code>åˆå§‹åŒ–æ–¹æ³•å„å‚æ•°æ„ä¹‰å¦‚ä¸‹:</p>
<ul>
<li>recurrenceWith: EKRecurrenceFrequency, ä»£è¡¨é‡å¤é¢‘ç‡ï¼Œå¯è®¾ç½®ï¼šæŒ‰å¤©ã€å‘¨ã€æœˆã€å¹´çš„é‡å¤é¢‘ç‡</li>
<li>interval: Int, ä»£è¡¨é‡å¤é—´éš”ï¼Œæ¯ä¸ªå¤šä¹…é‡å¤ï¼Œä¸èƒ½ä¸º0</li>
<li>daysOfTheWeek: [EKRecurrenceDayOfWeek], æ¯å‘¨å“ªå‡ å¤©é‡å¤ï¼Œè®¾ç½®ä¹‹åï¼Œé™¤äº†æŒ‰å¤©çš„é‡å¤é¢‘ç‡å¤–ï¼Œéƒ½å¯ä»¥ç”Ÿæ•ˆ</li>
<li>daysOfTheMonth: [number], numberå–å€¼1-31ï¼Œä¹Ÿå¯ä»¥ä¸ºè´Ÿæ•°ï¼Œè´Ÿæ•°è¯´æ˜æ˜¯ä»æœˆåº•å¼€å§‹ï¼Œæ¯”å¦‚-1æ˜¯è¯¥æœˆæœ€åä¸€å¤©ã€‚åªæœ‰åœ¨è®¾ç½®äº†æŒ‰æœˆé‡å¤é¢‘ç‡ä¸‹ç”Ÿæ•ˆ</li>
<li>monthsOfTheYear: [number], numberå–å€¼1-12ï¼Œåªæœ‰åœ¨è®¾ç½®äº†æŒ‰å¹´é‡å¤é¢‘ç‡ä¸‹ç”Ÿæ•ˆ</li>
<li>weeksOfTheYear: [number], numberå–å€¼1-53ï¼Œä¹Ÿå¯ä»¥ä¸ºè´Ÿæ•°ï¼Œè´Ÿæ•°è¯´æ˜æ˜¯ä»å¹´åº•å¼€å§‹ã€‚åªæœ‰åœ¨è®¾ç½®äº†æŒ‰å¹´é‡å¤é¢‘ç‡ä¸‹ç”Ÿæ•ˆ</li>
<li>daysOfTheYear: [number], numberå–å€¼1-366ï¼Œä¹Ÿå¯ä»¥ä¸ºè´Ÿæ•°ï¼Œè´Ÿæ•°è¯´æ˜æ˜¯ä»å¹´åº•å¼€å§‹ã€‚åªæœ‰åœ¨è®¾ç½®äº†æŒ‰å¹´é‡å¤é¢‘ç‡ä¸‹ç”Ÿæ•ˆ</li>
<li>setPositions: [number], numberå–å€¼1-366ï¼Œä¹Ÿå¯ä»¥ä¸ºè´Ÿæ•°ï¼Œè´Ÿå€¼è¡¨ç¤ºåå‘è®¡ç®—ï¼Œè¿‡æ»¤å…¶å®ƒè§„åˆ™çš„è¿‡æ»¤å™¨ï¼Œåœ¨è®¾ç½®äº†daysOfTheWeek, daysOfTheMonth, monthsOfTheYear, weeksOfTheYear, daysOfTheYear ä¹‹åæœ‰æ•ˆ</li>
<li>end: EKRecurrenceEnd, é‡å¤æˆªæ­¢æ—¥æœŸ</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿæˆé‡å¤çš„è§„åˆ™</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">generateEKRecurrenceRule</span>()</span> -&gt; <span class="type">EKRecurrenceRule</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> monday <span class="operator">=</span> <span class="type">EKRecurrenceDayOfWeek</span>(<span class="type">EKWeekday</span>.monday)</span><br><span class="line">    <span class="keyword">let</span> tuesday <span class="operator">=</span> <span class="type">EKRecurrenceDayOfWeek</span>(<span class="type">EKWeekday</span>.tuesday)</span><br><span class="line">    <span class="keyword">let</span> wednesday <span class="operator">=</span> <span class="type">EKRecurrenceDayOfWeek</span>(<span class="type">EKWeekday</span>.wednesday)</span><br><span class="line">    <span class="keyword">let</span> thursday <span class="operator">=</span> <span class="type">EKRecurrenceDayOfWeek</span>(<span class="type">EKWeekday</span>.thursday)</span><br><span class="line">    <span class="keyword">let</span> friday <span class="operator">=</span> <span class="type">EKRecurrenceDayOfWeek</span>(<span class="type">EKWeekday</span>.friday)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®¾ç½®æŒ‰é‡å¤é¢‘ç‡ä¸ºæŒ‰å‘¨é‡å¤ï¼Œé‡å¤é—´éš”ä¸ºæ¯å‘¨éƒ½é‡å¤ï¼Œä¸€å‘¨ä¸­çš„å‘¨ä¸€ã€å‘¨äºŒã€å‘¨ä¸‰ã€å‘¨å››ã€å‘¨äº”é‡å¤</span></span><br><span class="line">    <span class="keyword">let</span> rule <span class="operator">=</span> <span class="type">EKRecurrenceRule</span>(recurrenceWith: <span class="type">EKRecurrenceFrequency</span>.weekly,</span><br><span class="line">                                interval: <span class="number">1</span>,</span><br><span class="line">                                daysOfTheWeek: [monday, tuesday, wednesday, thursday, friday],</span><br><span class="line">                                daysOfTheMonth: <span class="literal">nil</span>,</span><br><span class="line">                                monthsOfTheYear: <span class="literal">nil</span>,</span><br><span class="line">                                weeksOfTheYear: <span class="literal">nil</span>,</span><br><span class="line">                                daysOfTheYear: <span class="literal">nil</span>,</span><br><span class="line">                                setPositions: <span class="literal">nil</span>,</span><br><span class="line">                                end: <span class="literal">nil</span>)</span><br><span class="line">    <span class="keyword">return</span> rule</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>æ ¹æ®æ ‡é¢˜ã€åœ°å€ã€å¤‡æ³¨ã€è§„åˆ™å’Œæ—¶é—´ç”Ÿæˆæ—¥å†äº‹ä»¶</p>
<p> ç”Ÿæˆæ—¥å†äº‹ä»¶æ—¶ï¼Œè¦æ³¨æ„äº‹ä»¶çš„æŒç»­æ—¶é—´ï¼Œä»¥åŠæ˜¯å¦æ·»åŠ é—¹é’Ÿæç¤ºã€‚è¿™ä¸ªé—¹é’Ÿæç¤ºä¸æ˜¯é€šå¸¸æ„ä¹‰çš„é—¹é’Ÿï¼Œæ˜¯æ—¥ç¨‹æé†’ï¼Œæ¯”å¦‚è®¾ç½®äº†äº‹ä»¶çš„é—¹é’Ÿæç¤ºï¼Œåœ¨è¾¾åˆ°é—¹é’Ÿæé†’æ—¶é—´åï¼Œä¼šæé†’å“é“ƒï¼Œä¸”åœ¨é€šçŸ¥æ å¼¹å‡ºã€‚</p>
 <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿæˆæ—¥å†äº‹ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">generateEvent</span>(<span class="keyword">_</span> <span class="params">title</span>: <span class="type">String</span>?, <span class="params">location</span>: <span class="type">String</span>?, <span class="params">notes</span>: <span class="type">String</span>?, <span class="params">timeStr</span>: <span class="type">String</span>?)</span> -&gt; <span class="type">EKEvent</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> event <span class="operator">=</span> <span class="type">EKEvent</span>(eventStore: store)</span><br><span class="line">    event.title <span class="operator">=</span> title</span><br><span class="line">    event.location <span class="operator">=</span> location</span><br><span class="line">    event.notes <span class="operator">=</span> notes</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// äº‹ä»¶çš„æ—¶é—´</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> date <span class="operator">=</span> <span class="type">Date</span>.date(from: timeStr, formatterStr: <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>) &#123;</span><br><span class="line">        <span class="comment">// å¼€å§‹</span></span><br><span class="line">        <span class="keyword">let</span> startDate <span class="operator">=</span> <span class="type">Date</span>(timeInterval: <span class="number">0</span>, since: date)</span><br><span class="line">        <span class="comment">// ç»“æŸ</span></span><br><span class="line">        <span class="keyword">let</span> endDate <span class="operator">=</span> <span class="type">Date</span>(timeInterval: <span class="number">60</span>, since: date)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ—¥å†æé†’æŒç»­æ—¶é—´</span></span><br><span class="line">        event.startDate <span class="operator">=</span> startDate</span><br><span class="line">        event.endDate <span class="operator">=</span> endDate</span><br><span class="line">        event.isAllDay <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å…¨å¤©æé†’</span></span><br><span class="line">        event.isAllDay <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ é‡å¤è§„åˆ™</span></span><br><span class="line">    <span class="keyword">let</span> recurrenceRule <span class="operator">=</span> generateEKRecurrenceRule()</span><br><span class="line">    event.addRecurrenceRule(recurrenceRule)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ é—¹é’Ÿç»“åˆï¼ˆå¼€å§‹å‰å¤šå°‘ç§’ï¼‰è‹¥ä¸ºæ­£åˆ™æ˜¯å¼€å§‹åå¤šå°‘ç§’ã€‚</span></span><br><span class="line">    <span class="keyword">let</span> alarm <span class="operator">=</span> <span class="type">EKAlarm</span>(relativeOffset: <span class="number">0</span>)</span><br><span class="line">    event.addAlarm(alarm)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> calendarId <span class="operator">=</span> <span class="type">MKCalendarReminderUtil</span>.userDefaultsSaveStr(kCustomCalendarId),</span><br><span class="line">       <span class="keyword">let</span> calendar <span class="operator">=</span> store.calendar(withIdentifier: calendarId) &#123;</span><br><span class="line">        event.calendar <span class="operator">=</span> calendar</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> event</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>æ·»åŠ äº‹ä»¶åˆ°æ—¥å† </p>
<p> æ·»åŠ æ—¶ï¼Œéœ€è¦åˆ¤æ–­ç”Ÿæˆçš„äº‹ä»¶æ˜¯å¦å·²ç»æ·»åŠ ï¼Œå·²æ·»åŠ åˆ™ä¸æ“ä½œï¼Œæ²¡æ·»åŠ åˆ™æ·»åŠ ã€‚æ·»åŠ æˆåŠŸåï¼ŒæŠŠäº‹ä»¶IDå­˜å‚¨èµ·æ¥ï¼Œé¿å…é‡å¤æ·»åŠ åŒä¸€ä¸ªäº‹ä»¶</p>
 <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ äº‹ä»¶åˆ°æ—¥å†</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addEvent</span>(<span class="keyword">_</span> <span class="params">title</span>: <span class="type">String</span>?, <span class="params">location</span>: <span class="type">String</span>?, <span class="params">notes</span>: <span class="type">String</span>?, <span class="params">timeStr</span>: <span class="type">String</span>, <span class="params">eventKey</span>: <span class="type">String</span>)</span> &#123;</span><br><span class="line">    requestEventAuth &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] granted <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> granted &#123;</span><br><span class="line">            <span class="comment">// å…ˆåˆ›å»ºæ—¥å†</span></span><br><span class="line">            <span class="keyword">self</span><span class="operator">?</span>.createNewCalendar()</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// åˆ¤æ–­äº‹ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> eventId <span class="operator">=</span> <span class="type">MKCalendarReminderUtil</span>.userDefaultsSaveStr(eventKey),</span><br><span class="line">               <span class="keyword">let</span> <span class="keyword">_</span> <span class="operator">=</span> <span class="keyword">self</span><span class="operator">?</span>.store.event(withIdentifier: eventId) &#123;</span><br><span class="line">                <span class="comment">// äº‹ä»¶å·²æ·»åŠ </span></span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> event <span class="operator">=</span> <span class="keyword">self</span><span class="operator">?</span>.generateEvent(title, location: location, notes: notes, timeStr: timeStr) &#123;</span><br><span class="line">                    <span class="keyword">do</span> &#123;</span><br><span class="line">                        <span class="keyword">try</span> <span class="keyword">self</span><span class="operator">?</span>.store.save(event, span: <span class="type">EKSpan</span>.thisEvent, commit: <span class="literal">true</span>)</span><br><span class="line">                        <span class="comment">//æ·»åŠ æˆåŠŸåéœ€è¦ä¿å­˜æ—¥å†å…³é”®å­—</span></span><br><span class="line">                        <span class="comment">// ä¿å­˜åœ¨æ²™ç›’ï¼Œé¿å…é‡å¤æ·»åŠ ç­‰å…¶ä»–åˆ¤æ–­</span></span><br><span class="line">                        <span class="type">MKCalendarReminderUtil</span>.saveToUserDefaults(eventKey, valueStr: event.eventIdentifier)</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">catch</span> &#123;</span><br><span class="line">                        <span class="built_in">print</span>(error)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<p>ä»å¤–éƒ¨ä½¿ç”¨ä¸‹é¢ä»£ç è°ƒç”¨</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> date <span class="operator">=</span> <span class="type">Date</span>.beijingDate()</span><br><span class="line"><span class="keyword">let</span> timeStr <span class="operator">=</span> <span class="type">Date</span>.string(from: date, formatterStr: <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)</span><br><span class="line"><span class="type">MKCalendarReminderUtil</span>.util.addEvent(<span class="string">&quot;è‡ªå®šä¹‰æ ‡é¢˜&quot;</span>, location: <span class="string">&quot;ä¸Šæµ·ä¸œæ–¹æ˜ç &quot;</span>, notes: <span class="string">&quot;è®°å¾—æ‹ç…§æ‰“å¡&quot;</span>, timeStr: timeStr<span class="operator">!</span>, eventKey: <span class="string">&quot;è‡ªå®šä¹‰æ ‡é¢˜&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¼šå…ˆå¼¹å‡ºæˆæƒè®¿é—®æ—¥å†çš„æç¤ºæ¡†ï¼Œç‚¹å‡»å…è®¸åï¼ŒæˆåŠŸæ·»åŠ åˆ°æ—¥å†ï¼Œç„¶åå»æ—¥å†ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ—¥å†ä¸­ä»å½“å¤©å¼€å§‹çš„ï¼Œæ¯å‘¨ä¸€è‡³å‘¨äº”éƒ½æœ‰äº‹ä»¶å­˜åœ¨</p>
<img src="https://i.loli.net/2021/05/14/VLlRoFKw43rXynp.png" width="50%" height="50%">

<p>ç‚¹å¼€å…·ä½“çš„æ—¥æœŸï¼Œå¯ä»¥çœ‹åˆ°å½“å¤©æ—¥æœŸçš„æ‰€æœ‰äº‹ä»¶ï¼Œç‚¹å‡»æ·»åŠ çš„äº‹ä»¶</p>
<img src="https://i.loli.net/2021/05/14/Fp3boaxTlgi2sJk.png" width="50%" height="50%">

<p>å¯ä»¥çœ‹åˆ°äº‹ä»¶çš„æ ‡é¢˜ã€åœ°å€ã€æŒç»­æ—¶é—´ã€é‡å¤é¢‘ç‡ã€æ‰€å±æ—¥å†ä»¥åŠå¤‡æ³¨</p>
<img src="https://i.loli.net/2021/05/14/DqMHQONuJGRz8yV.png" width="50%" height="50%">


<p>è‡³æ­¤ï¼Œç¬”è€…ä»¥åŠæˆåŠŸæ·»åŠ äº†å‘¨ä¸€åˆ°å‘¨äº”é‡å¤æé†’çš„äº‹ä»¶ï¼Œå·²ç»ç®—æ˜¯å®Œæˆäº†ä¸€åŠï¼Œå‹‰å¼ºèƒ½ç”¨ï¼Œå°±æ˜¯é‡åˆ°èŠ‚å‡æ—¥æ—¶ï¼Œè¡¥ç­ã€è°ƒä¼‘çš„æ—¶å€™ä¼šé”™è¯¯æé†’ã€‚æ‰€ä»¥è¿˜æœ‰åé¢çš„ä¸€èˆ¬ï¼Œæ€ä¹ˆæŠŠèŠ‚å‡æ—¥çš„é€»è¾‘åŠ å…¥åˆ°äº‹ä»¶ä¸­ï¼Ÿ</p>
<h3 id="ç¬¬äºŒæ­¥ï¼Œæ·»åŠ æ³•å®šèŠ‚å‡æ—¥é€»è¾‘"><a href="#ç¬¬äºŒæ­¥ï¼Œæ·»åŠ æ³•å®šèŠ‚å‡æ—¥é€»è¾‘" class="headerlink" title="ç¬¬äºŒæ­¥ï¼Œæ·»åŠ æ³•å®šèŠ‚å‡æ—¥é€»è¾‘"></a>ç¬¬äºŒæ­¥ï¼Œæ·»åŠ æ³•å®šèŠ‚å‡æ—¥é€»è¾‘</h3><p>ç¬”è€…ä¸€ç›´æƒ³çš„æ˜¯æ·»åŠ æ³•å®šèŠ‚å‡æ—¥çš„é€»è¾‘ï¼Œä¸€å¼€å§‹å…¶å®å°±é™·å…¥äº†è¯¯åŒºï¼Œä¸€ç›´æƒ³çš„æ˜¯ï¼Œæ˜¯å¦æœ‰ä¸€ä¸ªè§„åˆ™ï¼ŒæŒ‰ç…§è¿™ä¸ªè§„åˆ™ï¼Œèƒ½è‡ªåŠ¨è¿‡æ»¤æ‰èŠ‚å‡æ—¥å’Œæ·»åŠ è¡¥ç­ï¼Œç„¶åç”Ÿæˆé‡å¤æ—¥å†äº‹ä»¶ã€‚ç„¶è€Œå¹¶æ²¡æœ‰è¿™æ ·çš„è§„åˆ™å­˜åœ¨ã€‚</p>
<p>å‚è€ƒå¿«æ·æŒ‡ä»¤èŠ‚å‡æ—¥é—¹é’Ÿçš„å®ç°ï¼Œç¬”è€…å°±æƒ³åˆ°äº†å¦ä¸€ç§æ–¹å¼ï¼Œå¦‚æœæ²¡æœ‰ç›´æ¥èŠ‚å‡æ—¥çš„è§„åˆ™ï¼Œé‚£èƒ½å¦åˆ†ä¸¤æ­¥èµ°ï¼Ÿç¬¬ä¸€æ­¥å…ˆåˆ›å»ºå‘¨ä¸€åˆ°å‘¨äº”çš„å›ºå®šé‡å¤é€»è¾‘ï¼›ç¬¬äºŒæ­¥ï¼Œä»æŸä¸ªåœ°æ–¹è·å–åˆ°èŠ‚å‡æ—¥å’Œè¡¥ç­ä¿¡æ¯ï¼Œç„¶åæ ¹æ®ä¿¡æ¯ï¼Œåœ¨ç¬¬ä¸€æ­¥çš„åŸºç¡€ä¸Šï¼Œâ€œå¤šé€€å°‘è¡¥â€ï¼Œå³å±äºèŠ‚å‡æ—¥çš„å‘¨ä¸€è‡³å‘¨äº”çš„äº‹ä»¶ç§»é™¤ï¼Œå±äºè¡¥ç­çš„æ²¡æœ‰æ—¥å†äº‹ä»¶çš„åˆ™æ·»åŠ äº‹ä»¶ã€‚</p>
<p>é‚£è¿™ç§æ–¹æ¡ˆæ˜¯å¦å¯è¡Œå‘¢ï¼Ÿå®è·µå‡ºçœŸçŸ¥ï¼</p>
<p>æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>è·å–èŠ‚å‡æ—¥å’Œè¡¥ç­ä¿¡æ¯<br> ä»å“ªé‡Œèƒ½è·å–åˆ°èŠ‚å‡æ—¥å’Œè¡¥ç­ä¿¡æ¯å‘¢ï¼Ÿç¬”è€…å»ç½‘ä¸ŠæŸ¥æ‰¾äº†ä¸€ç•ªï¼Œæœ€ç»ˆçœ‹åˆ°äº†æœ‰ä¸¤ä¸ªåˆé€‚çš„è®¢é˜…æ¥æº<a target="_blank" rel="noopener" href="https://github.com/NateScarlet/holiday-cn">holiday-cn</a>å’Œ<a target="_blank" rel="noopener" href="http://timor.tech/api/holiday">èŠ‚å‡æ—¥ API</a>ï¼Œ</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/NateScarlet/holiday-cn">holiday-cn</a>ï¼šè‡ªåŠ¨æ¯æ—¥æŠ“å–å›½åŠ¡é™¢å…¬å‘Šï¼Œè¿”å›èŠ‚å‡æ—¥å’Œè¡¥ç­ä¿¡æ¯</li>
<li><a target="_blank" rel="noopener" href="http://timor.tech/api/holiday">èŠ‚å‡æ—¥ API</a>ï¼šæ˜¯ç”±ç§äººç»´æŠ¤çš„APIï¼Œæ”¯æŒå¤šç§APIæ¥å£è®¿é—®ï¼Œä¼ å…¥æœˆä»½ã€ä¼ å…¥æ—¥æœŸã€ä¼ å…¥å¹´ä»½ç­‰ç­‰</li>
</ul>
<p> å¯¹äºç¬”è€…æ¥è¯´ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/NateScarlet/holiday-cn">holiday-cn</a>å·²æ»¡è¶³ï¼Œæ•…è€Œç¬”è€…é€‰ç”¨äº†<a target="_blank" rel="noopener" href="https://github.com/NateScarlet/holiday-cn">holiday-cn</a>ã€‚å½“ç„¶å¦‚æœå…¬å¸æ”¯æŒï¼Œä¹Ÿå¯ä»¥åœ¨å…¬å¸æœåŠ¡ç«¯ç»´æŠ¤ä¸€ä»½èŠ‚å‡æ—¥ä¿¡æ¯ï¼Œèƒ½ä¿è¯å„ç«¯ç»Ÿä¸€ã€‚ç”šè‡³ä¹Ÿå¯ä»¥ç»´æŠ¤åœ¨å®¢æˆ·ç«¯ä¸€ä»½æœ¬åœ°jsonï¼Œç­‰ä¸‹ä¸€å¹´çš„èŠ‚å‡æ—¥ä¿¡æ¯å‡ºæ¥åï¼Œå†æ›´æ–°å®¢æˆ·ç«¯æœ¬åœ°çš„ã€‚</p>
<p> è¿”å›èŠ‚å‡æ—¥JSONæ ¼å¼å¦‚ä¸‹ï¼Œ<code>name</code>æ˜¯èŠ‚å‡æ—¥åç§°ï¼Œ<code>date</code>æ˜¯èŠ‚å‡æ—¥æ—¥æœŸï¼Œ<code>isOffDay</code>ä»£è¡¨æ˜¯å¦æ˜¯ä¼‘æ¯ï¼Œæ¯”å¦‚<code>2021-09-18</code>æ˜¯ä¸­ç§‹èŠ‚çš„è¡¥ç­</p>
</li>
</ol>
<pre><code><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;$schema&quot;</span>:<span class="string">&quot;https://raw.githubusercontent.com/NateScarlet/holiday-cn/master/schema.json&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;$id&quot;</span>:<span class="string">&quot;https://raw.githubusercontent.com/NateScarlet/holiday-cn/master/2021.json&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;year&quot;</span>:<span class="number">2021</span>,</span><br><span class="line">  <span class="attr">&quot;papers&quot;</span>:[</span><br><span class="line">      <span class="string">&quot;http://www.gov.cn/zhengce/content/2020-11/25/content_5564127.htm&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;days&quot;</span>:[</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;å…ƒæ—¦&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-01-01&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;å…ƒæ—¦&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-01-02&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;å…ƒæ—¦&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-01-03&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;æ˜¥èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-02-07&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;æ˜¥èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-02-11&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;æ˜¥èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-02-12&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;æ˜¥èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-02-13&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;æ˜¥èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-02-14&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;æ˜¥èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-02-15&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;æ˜¥èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-02-16&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;æ˜¥èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-02-17&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;æ˜¥èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-02-20&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;æ¸…æ˜èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-04-03&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;æ¸…æ˜èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-04-04&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;æ¸…æ˜èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-04-05&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;åŠ³åŠ¨èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-04-25&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;åŠ³åŠ¨èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-05-01&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;åŠ³åŠ¨èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-05-02&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;åŠ³åŠ¨èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-05-03&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;åŠ³åŠ¨èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-05-04&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;åŠ³åŠ¨èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-05-05&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;åŠ³åŠ¨èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-05-08&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;ç«¯åˆèŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-06-12&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;ç«¯åˆèŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-06-13&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;ç«¯åˆèŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-06-14&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;ä¸­ç§‹èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-09-18&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;ä¸­ç§‹èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-09-19&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;ä¸­ç§‹èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-09-20&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;ä¸­ç§‹èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-09-21&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;å›½åº†èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-09-26&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;å›½åº†èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-10-01&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;å›½åº†èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-10-02&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;å›½åº†èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-10-03&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;å›½åº†èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-10-04&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;å›½åº†èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-10-05&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;å›½åº†èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-10-06&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;å›½åº†èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-10-07&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;å›½åº†èŠ‚&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;date&quot;</span>:<span class="string">&quot;2021-10-09&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;isOffDay&quot;</span>:<span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

ä»£ç å¦‚ä¸‹

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">filterHolidayInfo</span>(<span class="params">with</span> <span class="params">title</span>: <span class="type">String</span>?, <span class="params">location</span>: <span class="type">String</span>?, <span class="params">notes</span>: <span class="type">String</span>?, <span class="params">timeStr</span>: <span class="type">String</span>, <span class="params">eventKey</span>: <span class="type">String</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> url <span class="operator">=</span> <span class="type">URL</span>(string: <span class="string">&quot;https://natescarlet.coding.net/p/github/d/holiday-cn/git/raw/master/2021.json&quot;</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> task <span class="operator">=</span> <span class="type">URLSession</span>.shared.dataTask(with: url) &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (data, response, error) <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> data <span class="operator">=</span> data <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> jsonResult <span class="operator">=</span> <span class="keyword">try</span> <span class="type">JSONSerialization</span>.jsonObject(with: data, options: <span class="type">JSONSerialization</span>.<span class="type">ReadingOptions</span>.mutableContainers) <span class="keyword">as?</span> <span class="type">NSDictionary</span>,</span><br><span class="line">               <span class="keyword">let</span> days <span class="operator">=</span> jsonResult[<span class="string">&quot;days&quot;</span>] <span class="keyword">as?</span> [<span class="type">NSDictionary</span>] &#123;</span><br><span class="line">                <span class="comment">// è¿‡æ»¤èŠ‚å‡æ—¥</span></span><br><span class="line">                <span class="keyword">self</span><span class="operator">?</span>.handleHolidayInfo(with: days, title: title, location: location, notes: notes, timeStr: timeStr, eventKey: eventKey)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(error)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    task.resume()</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</code></pre>
<ol start="2">
<li><p>â€œå¤šé€€å°‘è¡¥â€</p>
<p> å³å±äºèŠ‚å‡æ—¥çš„å‘¨ä¸€è‡³å‘¨äº”çš„äº‹ä»¶ç§»é™¤ï¼Œå±äºè¡¥ç­çš„æ²¡æœ‰æ—¥å†äº‹ä»¶çš„åˆ™æ·»åŠ äº‹ä»¶ã€‚è¿™é‡Œéœ€è¦åˆ¤æ–­ï¼ŒæŸå¤©æ—¥æœŸæ˜¯å¦æœ‰å½“å‰çš„äº‹ä»¶ã€‚</p>
 <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æŸå¤©ï¼Œæ˜¯å¦æœ‰æŒ‡å®šçš„äº‹ä»¶</span></span><br><span class="line"><span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">eventExist</span>(<span class="params">on</span> <span class="params">tdate</span>: <span class="type">Date</span>?, <span class="params">eventKey</span>: <span class="type">String</span>)</span> -&gt; <span class="type">EKEvent</span>? &#123;</span><br><span class="line">    <span class="keyword">var</span> resultEvent: <span class="type">EKEvent</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> date <span class="operator">=</span> tdate <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> resultEvent</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> endDate <span class="operator">=</span> date.addingTimeInterval(<span class="type">TimeInterval</span>(<span class="number">24</span> <span class="operator">*</span> <span class="number">60</span> <span class="operator">*</span> <span class="number">60</span>))</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> calendarId <span class="operator">=</span> <span class="type">MKCalendarReminderUtil</span>.userDefaultsSaveStr(kCustomCalendarId),</span><br><span class="line">          <span class="keyword">let</span> eventId <span class="operator">=</span> <span class="type">MKCalendarReminderUtil</span>.userDefaultsSaveStr(eventKey),</span><br><span class="line">          <span class="keyword">let</span> calendar <span class="operator">=</span> store.calendar(withIdentifier: calendarId) <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> resultEvent</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> predicate <span class="operator">=</span> store.predicateForEvents(withStart: date, end: endDate, calendars: [calendar])</span><br><span class="line">    <span class="keyword">let</span> events <span class="operator">=</span> store.events(matching: predicate)</span><br><span class="line">    <span class="keyword">for</span> event <span class="keyword">in</span> events &#123;</span><br><span class="line">        <span class="keyword">if</span> event.eventIdentifier <span class="operator">==</span> eventId &#123;</span><br><span class="line">            resultEvent <span class="operator">=</span> event</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> resultEvent</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;å¤šé€€å°‘è¡¥&quot;</span></span><br><span class="line"><span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">handleHolidayInfo</span>(<span class="params">with</span> <span class="params">days</span>: [<span class="type">NSDictionary</span>], <span class="params">title</span>: <span class="type">String</span>?, <span class="params">location</span>: <span class="type">String</span>?, <span class="params">notes</span>: <span class="type">String</span>?, <span class="params">timeStr</span>: <span class="type">String</span>, <span class="params">eventKey</span>: <span class="type">String</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> dayDic <span class="keyword">in</span> days &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> dayStr <span class="operator">=</span> dayDic[<span class="string">&quot;date&quot;</span>] <span class="keyword">as?</span> <span class="type">String</span>,</span><br><span class="line">           <span class="keyword">let</span> date <span class="operator">=</span> <span class="type">Date</span>.date(from: dayStr, formatterStr: <span class="string">&quot;yyyy-MM-dd&quot;</span>), <span class="comment">// æ—¥æœŸ</span></span><br><span class="line">           <span class="keyword">let</span> isOffDay <span class="operator">=</span> dayDic[<span class="string">&quot;isOffDay&quot;</span>] <span class="keyword">as?</span> <span class="type">Bool</span> &#123; <span class="comment">// æ˜¯å¦ä¸Šç­</span></span><br><span class="line">            <span class="keyword">let</span> interval <span class="operator">=</span> date.timeIntervalSince(date)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 1. åˆ¤æ–­è·å–åˆ°çš„æ—¥æœŸå°äºå½“å‰æ—¥æœŸï¼Œè¯´æ˜æ˜¯ä»¥å‰çš„æ—¥æœŸï¼Œä¸å¤„ç†</span></span><br><span class="line">            <span class="comment">// 2. åˆ¤æ–­æ—¥æœŸå¤§äºç­‰äºå½“å‰æ—¥æœŸåï¼Œåˆ¤æ–­æ˜¯å¦ä¼‘æ¯ï¼Œåˆ¤æ–­æ—¥æœŸé‚£å¤©æ˜¯å¦æœ‰è¦æ·»åŠ çš„äº‹ä»¶ï¼Œ</span></span><br><span class="line">            <span class="comment">// 3. ä¼‘æ¯ï¼Œæœ‰äº‹ä»¶ï¼Œåˆ™ç§»é™¤äº‹ä»¶</span></span><br><span class="line">            <span class="comment">// 4. æœªä¼‘æ¯ï¼Œæ— äº‹ä»¶ï¼Œåˆ™æ·»åŠ äº‹ä»¶</span></span><br><span class="line">            <span class="keyword">if</span> interval <span class="operator">&lt;</span> <span class="number">0</span> &#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> targetEvent <span class="operator">=</span> eventExist(on: date, eventKey: eventKey) &#123;</span><br><span class="line">                    <span class="comment">// äº‹ä»¶å­˜åœ¨</span></span><br><span class="line">                    <span class="keyword">if</span> isOffDay &#123; <span class="comment">// ä¼‘æ¯æ—¥</span></span><br><span class="line">                        <span class="keyword">do</span> &#123;</span><br><span class="line">                            <span class="keyword">try</span> store.remove(targetEvent, span: <span class="type">EKSpan</span>.thisEvent)</span><br><span class="line">                        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">                            <span class="built_in">print</span>(error)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// äº‹ä»¶ä¸å­˜åœ¨</span></span><br><span class="line">                    <span class="keyword">if</span> <span class="operator">!</span>isOffDay &#123; <span class="comment">// éä¼‘æ¯æ—¥ï¼Œå³è¦è¡¥ç­</span></span><br><span class="line">                        <span class="keyword">let</span> event <span class="operator">=</span> generateEvent(title, location: location, notes: notes, timeStr: timeStr)</span><br><span class="line">                        <span class="keyword">do</span> &#123;</span><br><span class="line">                            <span class="keyword">try</span> store.save(event, span: <span class="type">EKSpan</span>.thisEvent)</span><br><span class="line">                        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">                            <span class="built_in">print</span>(error)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<p>è¿™ä¸ªåœ°æ–¹è¿˜æœ‰ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼Œç¬”è€…åœ¨ç”Ÿæˆäº‹ä»¶<code>generateEvent</code>çš„æ–¹æ³•ä¸­ï¼Œæ·»åŠ äº†é‡å¤è§„åˆ™ï¼Œå¦‚æœä¸ä¿®æ”¹çš„è¯ï¼Œæœ€åä¼‘æ¯æ—¥è¡¥ç­è°ƒç”¨ç”Ÿæˆäº‹ä»¶æ–¹æ³•æ—¶ä¼šæœ‰é—®é¢˜ã€‚æ‰€ä»¥è¿™ä¸ªåœ°æ–¹è¦æŠŠäº‹ä»¶é‡å¤è§„åˆ™çš„é€»è¾‘ä»é€šç”¨çš„<code>generateEvent</code>æ–¹æ³•ä¸­æŠ½å‡ºæ¥ã€‚æ”¾åˆ°<code>addEvent</code>æ–¹æ³•çš„saveä¹‹å‰ã€‚</p>
<p>æœ€åè¿è¡Œè°ƒè¯•ï¼Œè°ƒç”¨ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> date <span class="operator">=</span> <span class="type">Date</span>.beijingDate()</span><br><span class="line"><span class="keyword">let</span> timeStr <span class="operator">=</span> <span class="type">Date</span>.string(from: date, formatterStr: <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)</span><br><span class="line"><span class="type">MKCalendarReminderUtil</span>.util.addEvent(<span class="string">&quot;è‡ªå®šä¹‰æ ‡é¢˜2&quot;</span>, location: <span class="string">&quot;ä¸Šæµ·ä¸œæ–¹æ˜ç 2&quot;</span>, notes: <span class="string">&quot;è®°å¾—æ‹ç…§æ‰“å¡2&quot;</span>, timeStr: timeStr<span class="operator">!</span>, eventKey: <span class="string">&quot;è‡ªå®šä¹‰æ ‡é¢˜2&quot;</span>, filterHoliday: <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š</p>
<img src="https://i.loli.net/2021/05/14/RiMj5VZrnhKqvGt.png" width="50%" height="50%">

<p>å¯ä»¥çœ‹åˆ°ä¸­ç§‹èŠ‚å’Œå›½åº†èŠ‚å‘¨ä¸€åˆ°å‘¨äº”çš„é€»è¾‘å¥½äº†ï¼Œä¹‹å‰æœ‰äº‹ä»¶çš„ç°åœ¨å·²ç»ç§»é™¤äº†ã€‚ä½†æ˜¯åº”è¯¥è¡¥ç­çš„ï¼Œæ¯”å¦‚9æœˆ18å’Œ9æœˆ26ï¼Œäº‹ä»¶å´æ²¡æœ‰åŠ ä¸Šï¼Ÿä»€ä¹ˆé¬¼ï¼Ÿéš¾é“æ˜¯æ·»åŠ äº‹ä»¶å¤±è´¥ï¼Ÿè°ƒè¯•åå‘ç°å¹¶æ²¡æœ‰ï¼Œäº‹ä»¶æ·»åŠ æ˜¯æˆåŠŸçš„ï¼Œä½†æ˜¯æ—¥å†ä¸­è¡¥ç­çš„æ—¥æœŸå´æ²¡æœ‰äº‹ä»¶ï¼Œå—¯å“¼ï¼Ÿ</p>
<p>å†å›è¿‡å¤´æ¥çœ‹è¡¥ç­æ·»åŠ äº‹ä»¶çš„é‚£æ®µä»£ç </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// äº‹ä»¶ä¸å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> <span class="operator">!</span>isOffDay &#123; <span class="comment">// éä¼‘æ¯æ—¥ï¼Œå³è¦è¡¥ç­</span></span><br><span class="line">    <span class="keyword">let</span> event <span class="operator">=</span> generateEvent(title, location: location, notes: notes, timeStr: timeStr)</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> store.save(event, span: <span class="type">EKSpan</span>.thisEvent)</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ ¹æ®titleã€locationã€notesã€timeæ·»åŠ äº‹ä»¶ï¼Œå™¢â€¦æ—¶é—´é”™äº†ï¼Œè¿™ä¸ªåœ°æ–¹åº”è¯¥æ·»åŠ çš„æ˜¯è¡¥ç­çš„æ—¥æœŸï¼Œè€Œä¸æ˜¯æœ€å¼€å§‹çš„æ—¥æœŸã€‚ã€‚ã€‚æ‰€ä»¥çœ‹ä¸€ä¸‹å½“å¤©æ—¥æœŸï¼Œåº”è¯¥èƒ½å‘ç°äº‹ä»¶éƒ½æ·»åŠ åˆ°é‚£å¤©é‡Œé¢äº†ã€‚</p>
<p>æ‰€ä»¥è¿™ä¸ªåœ°æ–¹éœ€è¦ä¿®æ”¹ä¸ºï¼Œä»ä¼ å…¥æ—¥æœŸä¸­è·å–æ—¶åˆ†ç§’ï¼Œç„¶åæ‹¼æ¥ä¸Šè¡¥ç­çš„æ—¥æœŸï¼Œä½œä¸ºè¦è®¾ç½®çš„æ—¥æœŸï¼Œä¿®æ”¹å¦‚ä¸‹</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// äº‹ä»¶ä¸å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> <span class="operator">!</span>isOffDay &#123; <span class="comment">// éä¼‘æ¯æ—¥ï¼Œå³è¦è¡¥ç­</span></span><br><span class="line">    <span class="keyword">var</span> targetDateStr <span class="operator">=</span> dayStr</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> lastComponentStr <span class="operator">=</span> timeStr.components(separatedBy: <span class="string">&quot; &quot;</span>).last &#123;</span><br><span class="line">        targetDateStr <span class="operator">=</span> <span class="type">String</span>(format: <span class="string">&quot;%@ %@&quot;</span>, dayStr, lastComponentStr)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> event <span class="operator">=</span> generateEvent(title, location: location, notes: notes, timeStr: targetDateStr)</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> store.save(event, span: <span class="type">EKSpan</span>.thisEvent)</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œè°ƒè¯•è¿è¡Œï¼Œæˆè´¥åœ¨æ­¤ä¸€ä¸¾ï¼Œå“ˆå“ˆå“ˆï¼Œbinggoï¼Œå®Œç¾</p>
<img src="https://i.loli.net/2021/05/14/u1P5b9eZrTNzJmy.png" width="50%" height="50%">

<p>ä»£ç åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/mokong/MKReminderUtil">MKReminderUtil</a></p>
<h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><p><img src="https://i.loli.net/2021/05/14/mJreAbHcWNziTSD.png" alt="WX20210514-171744.png"></p>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç”Ÿæˆçš„æ—¥å†æé†’ï¼Œè¿˜éœ€è¦è€ƒè™‘ä¸€ç‚¹ï¼Œå°±æ˜¯èŠ‚å‡æ—¥æ•°æ®æœ‰æ›´æ–°çš„æ—¶å€™ï¼Œå¦‚ä½•æ›´æ–°ï¼Ÿç¬”è€…è¿™é‡Œæ„Ÿè§‰å¦‚æœæ˜¯åœ¨è‡ªå·±æœåŠ¡ç«¯ç»´æŠ¤ä¸€å¥—èŠ‚å‡æ—¥æ•°æ®æ¯”è¾ƒå¥½ï¼Œè¿”å›èŠ‚å‡æ—¥æ•°æ®æ—¶ï¼Œä¹Ÿè¿”å›å¯¹åº”ç‰ˆæœ¬å·ã€‚è¿™æ ·è¯·æ±‚äº†ä¹‹åï¼Œæ ¹æ®versionå¯¹æ¯”ï¼Œå¦‚æœèŠ‚å‡æ—¥æ•°æ®æ²¡æœ‰æ›´æ–°ï¼Œåˆ™æ— éœ€åšä»»ä½•æ“ä½œï¼Œå¦‚æœæœ‰æ›´æ–°ï¼Œåˆ™æ ¹æ®æ›´æ–°çš„æ•°æ®é»˜é»˜çš„æŠŠæ˜å¹´çš„æ—¥å†ä¹Ÿåˆ›å»ºäº†å³å¯ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/eventkit/ekrecurrencerule">Creating a Recurring Event</a></li>
<li><a target="_blank" rel="noopener" href="http://www.voidcn.com/article/p-bwvrwkpr-bwd.html">ios â€“ å¦‚ä½•ä»æ—¥å†ä¸­è·å–æ‰€æœ‰äº‹ä»¶(Swift)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/NateScarlet/holiday-cn">holiday-cn</a></li>
<li><a target="_blank" rel="noopener" href="http://timor.tech/api/holiday">èŠ‚å‡æ—¥ API</a></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="http://morganwang.cn">ä»Šæ˜¯æ˜¨é</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://morganwang.cn/2021/05/14/iOS%20%E5%B7%A5%E4%BD%9C%E6%97%A5%E2%80%94%E2%80%94%E8%BF%87%E6%BB%A4%E6%B3%95%E5%AE%9A%E8%8A%82%E5%81%87%E6%97%A5%E6%97%A5%E5%8E%86%E6%8F%90%E9%86%92%E7%9A%84%E5%AE%9E%E7%8E%B0/">http://morganwang.cn/2021/05/14/iOS%20%E5%B7%A5%E4%BD%9C%E6%97%A5%E2%80%94%E2%80%94%E8%BF%87%E6%BB%A4%E6%B3%95%E5%AE%9A%E8%8A%82%E5%81%87%E6%97%A5%E6%97%A5%E5%8E%86%E6%8F%90%E9%86%92%E7%9A%84%E5%AE%9E%E7%8E%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="http://morganwang.cn" target="_blank">ä»Šæ˜¯æ˜¨éçš„åšå®¢</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a><a class="post-meta__tags" href="/tags/iOS/">iOS</a></div><div class="post-share"><div class="social-share" data-image="/assets/img/avatar.jpeg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2021/05/27/iOS%20%E5%8C%85%E5%A4%A7%E5%B0%8F%E4%BC%98%E5%8C%96/" title="æ­£ç»åˆ†æiOSåŒ…å¤§å°ä¼˜åŒ–"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">æ­£ç»åˆ†æiOSåŒ…å¤§å°ä¼˜åŒ–</div></div><div class="info-2"><div class="info-item-1">æœ¬æ–‡å‘è¡¨åœ¨ã€Šæœç‹æŠ€æœ¯äº§å“ã€‹å…¬ä¼—å·æ­£ç»åˆ†æiOSåŒ…å¤§å°ä¼˜åŒ– iOS åŒ…å¤§å°åˆ†æä¼˜åŒ–èƒŒæ™¯åŒ…å¤§å°ä¼˜åŒ–æ˜¯é¡¹ç›®å¼€å‘ä¸­ä¸å¯é¿å…ä¼šé‡åˆ°çš„ï¼Œç½‘ä¸Šå…³äºåŒ…å¤§å°ä¼˜åŒ–çš„æ–‡ç« å¾ˆå¤šï¼Œæ¯ç¯‡æ–‡ç« è¯´çš„éƒ½ä¸å°½ç›¸åŒï¼Œç¬”è€…æ›¾ç»æ ¹æ®ç½‘ä¸Šçš„æ–‡ç« åšè¿‡åŒ…å¤§å°ä¼˜åŒ–ï¼Œä½†æ•ˆæœä¸å°½äººæ„ï¼›å› æ­¤ç¬”è€…æƒ³æ ¹æ®å·²æœ‰çš„æ–‡ç« ã€çŸ¥è¯†ç»“åˆè‡ªå·±çš„ç†è§£ã€å®è·µï¼Œåšä¸€ä»½æ€»ç»“æ¢³ç†ï¼Œæ•´ç†è‡ªå·±çš„åŒ…å¤§å°ä¼˜åŒ–é€»è¾‘ï¼Œä¸å…‰è¦çŸ¥é“æ€ä¹ˆåšå¯ä»¥è®©åŒ…å¤§å°å˜åŒ–ï¼Œè¿˜è¦çŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¹ˆåšèƒ½äº§ç”Ÿæ•ˆæœï¼Œæ‰€ä»¥å°±æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚   åˆ†ææƒ³è¦ä¼˜åŒ–å®‰è£…åŒ…å¤§å°ï¼Œé¦–å…ˆéœ€è¦å¼„æ¸…æ¥šå½±å“å®‰è£…åŒ…å¤§å°çš„å› ç´ æœ‰å“ªäº›ï¼Ÿä¹‹å‰ç¬”è€…ä¼˜åŒ–åŒ…å¤§å°ç›´æ¥é—·ç€å¤´å°±å»ç˜¦èº«ï¼Œç˜¦æ¥ç˜¦å»ä¹Ÿæ²¡ç˜¦å‡ºä¸ªåå ‚ï¼Œè€Œä¸”è¿˜è·Ÿåˆ«äººè¯´ä¸æ¸…æ¥šè‡ªå·±åšäº†ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ åæ¥æ€»ç»“å‡ºæ¥ï¼Œåšäº‹ä¹‹å‰è¦å…ˆæ€è€ƒã€åˆ†æã€æœ€åå†å»åšï¼Œè¦æ€è€ƒçš„æ˜¯å½±å“è¿™ä»¶äº‹çš„å› ç´ æœ‰å“ªäº›ï¼Œä¸€ä¸€åˆ—ä¸¾å‡ºæ¥ï¼ŒæŸ¥æ¼è¡¥ç¼ºï¼›ç„¶åé’ˆå¯¹è¿™äº›å› ç´ è¿›è¡Œåˆ†æï¼Œåˆ†æå“ªäº›å› ç´ æ˜¯äººä¸ºå¯æ§çš„ï¼Œå“ªäº›å› ç´ æ˜¯ä¸èƒ½æ”¹å˜çš„ï¼Œé’ˆå¯¹å¯æ§çš„éƒ¨åˆ†è¦æ€ä¹ˆä¼˜åŒ–ï¼Œä¸å¯æ§çš„éƒ¨åˆ†æ˜¯å¦èƒ½é¿å…ï¼Œæœ€å¥½å¯ä»¥ä½¿ç”¨æ€ç»´å¯¼å›¾å·¥å…·ï¼Œä¸€ä¸€è®°å½•ï¼›ç„¶åæŒ‰ç…§æ€ç»´å¯¼å›¾çš„æ•´ç†å‡ºæ¥çš„æ•°æ®ï¼ŒæŒ‰æ­¥éª¤å»æ‰§è¡Œã€‚ å›è¿‡å¤´æ¥ï¼Œé’ˆå¯¹å®‰è£…åŒ…å¤§å°ï¼Œé¦–å…ˆåˆ†æå½±å“å®‰è£…åŒ…å¤§å°çš„å› ç´ ï¼Œæœ‰ï¼šXcodeçš„è®¾ç½®ã€èµ„...</div></div></div></a><a class="pagination-related" href="/2021/05/13/%E5%A6%82%E4%BD%95%E8%AE%A9iOS%E6%8E%A8%E9%80%81%E6%92%AD%E6%94%BE%E8%AF%AD%E9%9F%B3/" title="å¦‚ä½•è®©iOSæ¨é€æ’­æ”¾è¯­éŸ³"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">å¦‚ä½•è®©iOSæ¨é€æ’­æ”¾è¯­éŸ³</div></div><div class="info-2"><div class="info-item-1">æœ¬æ–‡å‘è¡¨åœ¨ã€Šæœç‹æŠ€æœ¯äº§å“ã€‹å…¬ä¼—å·å¦‚ä½•è®©iOSæ¨é€æ’­æ”¾è¯­éŸ³ iOS æ¨é€æ’­æ”¾è¯­éŸ³ä¸€ï¼šèƒŒæ™¯iOS æ¨é€æ’­æ”¾è¯­éŸ³çš„éœ€æ±‚è°ƒç ”ï¼Œå³æ”¶åˆ°æ¨é€åï¼Œæ’­æ”¾æ¨é€çš„æ–‡æ¡ˆï¼Œæ–‡æ¡ˆçš„å†…å®¹ä¸å›ºå®šã€‚ç±»ä¼¼äºæ”¯ä»˜å®å’Œå¾®ä¿¡çš„æ”¶æ¬¾åˆ°è´¦è¯­éŸ³ã€‚  åªæœ‰iOS10ä»¥ä¸Šæ‰æ”¯æŒappè¢«å”¤é†’ååœ¨åå°/é”å±çŠ¶æ€ä¸‹æ’­æ”¾éŸ³é¢‘ã€‚æ‰€ä»¥iOS10ä»¥ä¸‹çš„è®¾å¤‡ï¼Œåœ¨æ”¶åˆ°VoIP Pushååªèƒ½åœ¨local pushä¸Šè®¾å®šä¸€æ®µå›ºå®šé“ƒå£°ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆiOS10ä»¥ä¸‹åªæœ‰â€œå¾®ä¿¡æ”¯ä»˜æ”¶æ¬¾åˆ°è´¦â€ã€‚ iOS 12.0ä¹‹å‰ï¼Œåå°æ’­æ”¾éŸ³é¢‘æœªè¢«é™åˆ¶ï¼Œç›´æ¥ä½¿ç”¨Notification Service Extension (iOS 10.0ä»¥åæ‰æ”¯æŒ) åŠŸèƒ½ä½¿ç”¨ç³»ç»Ÿæä¾›çš„åŠŸèƒ½AVSpeechSynthesizerå³å¯ã€‚ iOS 12.0ä¹‹åï¼ŒNotification Service Extensionåå°æ’­æ”¾éŸ³é¢‘åŠŸèƒ½è¢«é™åˆ¶ï¼Œæ‰€ä»¥æ’­æ”¾å®ç°èµ·æ¥æ¯”è¾ƒå›°éš¾ã€‚ å¦‚æœè¦ä¸Šæ¶å•†åº—ï¼Œåªæœ‰æ’­æ”¾å›ºå®šçš„éŸ³é¢‘ï¼Œæˆ–å›ºå®šæ‹¼æ¥çš„éŸ³é¢‘ï¼Œé€šè¿‡è®¾ç½®é€šçŸ¥çš„å£°éŸ³æˆ–è€…å‘é€æœ¬åœ°é€šçŸ¥è®¾ç½®æœ¬åœ°é€šçŸ¥çš„å£°éŸ³æ¥æ’­æ”¾ å¦‚æœæ— éœ€ä¸Šæ¶å•†åº—ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰“å¼€Notification Service Extensionçš„åå°æ’­æ”¾ï¼Œ    ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/08/26/%E5%BD%95%E9%9F%B3%E5%B4%A9%E6%BA%83%E6%8E%92%E6%9F%A5/" title="ä¸€æ¬¡è¯¡å¼‚çš„å½•éŸ³å´©æºƒæ’æŸ¥"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-26</div><div class="info-item-2">ä¸€æ¬¡è¯¡å¼‚çš„å½•éŸ³å´©æºƒæ’æŸ¥</div></div><div class="info-2"><div class="info-item-1">èƒŒæ™¯ä¸Šåˆçªç„¶æœ‰ç”¨æˆ·åé¦ˆï¼Œä½¿ç”¨å½•éŸ³åŠŸèƒ½å´©æºƒã€‚èµ·åˆä»¥ä¸ºæ˜¯æœ€è¿‘æ›´æ–°çš„APPæ–°ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œèµ¶ç´§å»æ’æŸ¥ã€‚   æ’æŸ¥é¦–å…ˆåœ¨æµ‹è¯•æ‰‹æœºä¸Šï¼Œæµ‹è¯•ç¯å¢ƒè°ƒè¯•ï¼Œå‘ç°å¹¶æ²¡æœ‰å´©æºƒï¼Œé•¿å‡ºäº†ä¸€å£æ°”ï¼Œè¯´æ˜ä¸æ˜¯æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰ï¼Œä¸æ˜¯æ–°ç‰ˆæœ¬æ”¹å‡ºæ¥çš„é—®é¢˜ã€‚ ç„¶åå»å¬äº‘åå°çœ‹æ—¥å¿—ï¼Œå‘ç°å´©æºƒçš„åœ°æ–¹æ˜¯åˆå§‹åŒ–AVAudioRecorderçš„æ–¹æ³•â€”â€”[[AVAudioRecorder alloc] initWithURL:url settings:recordSettings error:&amp;error];ã€‚å¾ˆè´¹è§£ï¼Œåªæ˜¯ç®€å•çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆä¼šå¯¼è‡´å´©æºƒå‘¢ï¼Ÿ ä¸€å¼€å§‹çŒœæµ‹ä¼šä¸ä¼šæ˜¯ç”¨æˆ·å½•éŸ³æƒé™æ²¡å¼€ï¼Œå¯¼è‡´å¼€å§‹å½•éŸ³çš„æ—¶å€™å´©æºƒã€‚å°è¯•åå‘ç°å¦‚æœæƒé™å…³é—­ï¼Œåœ¨è¿›å…¥å½•éŸ³é¡µé¢å‰å°±ä¼šæç¤ºæƒé™æœªå¼€å¯ï¼Œå»å¼€å¯æƒé™ï¼Œå¹¶ä¸èƒ½è¿›å…¥åˆ°å½•éŸ³æ­¥éª¤ã€‚ ç„¶åæ€€ç–‘ä¼šä¸ä¼šæ˜¯åˆå§‹åŒ–çš„urlä¸ºç©ºï¼Œåˆæˆ–è€…æœºå‹ä¸æ”¯æŒè®¾ç½®recordSettingsä¸­çš„æŸäº›å‚æ•°ï¼Ÿæœç´¢åï¼Œå‘ç°æœ‰urlä¸ºç©ºå´©æºƒçš„æ¡ç›®ï¼Œæ‰€ä»¥è¿™é‡Œå¤§æ¦‚ç‡ä¹Ÿæ˜¯åˆå§‹åŒ–çš„urlä¸ºç©ºã€‚ ç»§ç»­æ’æŸ¥ï¼Œå‘ç°åˆå§‹åŒ–çš„urlï¼Œæ˜¯æœ¬åœ°çš„ç¼“å­˜æ–‡ä»¶å¤¹ä¸­Audioæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”æ–‡ä»¶åå­—æ˜¯å–æ—¥æœŸ+æ—¶åˆ†ç§’ç”¨äºé¿å…é‡å¤ï¼Œæ ¼å¼ä¸ºyyyyMMdd_HHmmss...</div></div></div></a><a class="pagination-related" href="/2022/08/20/iOS%E8%BE%93%E5%85%A5%E6%A1%86%E5%AD%97%E7%AC%A6%E9%99%90%E5%88%B6/" title="iOSè¾“å…¥æ¡†å­—ç¬¦é™åˆ¶"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-20</div><div class="info-item-2">iOSè¾“å…¥æ¡†å­—ç¬¦é™åˆ¶</div></div><div class="info-2"><div class="info-item-1">èƒŒæ™¯å°çŸ¥è¯†ç‚¹è®°å½•ï¼ŒtextFieldçš„markedTextRangeçš„ä½¿ç”¨ï¼Œå¦‚æœä½ å·²ç»çŸ¥é“äº†ï¼Œå°±ä¸éœ€è¦å†çœ‹äº†ã€‚ iOSè¾“å…¥æ¡†å­—ç¬¦é™åˆ¶ï¼Œä¸åŒå®ç°æ–¹å¼çš„å¯¹æ¯”ï¼š  æ–¹æ³•1ï¼Œé€šè¿‡ç›‘å¬textFieldçš„UIControl.Event.editingChangedï¼Œåœ¨å¯¹åº”çš„æ–¹æ³•é‡Œåšé•¿åº¦æ‹¦æˆªåˆ¤æ–­ æ–¹æ³•2ï¼Œé€šè¿‡textFieldçš„ä»£ç†æ–¹æ³•ï¼ŒtextField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -&gt; Boolåˆ¤æ–­ã€‚    å¯¹æ¯”å‡è®¾äº§å“è¦æ±‚è¿™ä¸ªè¾“å…¥æ¡†é™åˆ¶è¾“å…¥6ä¸ªå­—ï¼Œæ€ä¹ˆåˆ¤æ–­ï¼Ÿä¸‹é¢æ¥çœ‹ä¸‹ æ–¹æ³•1å£°æ˜ä¸€ä¸ªè‡ªå®šä¹‰çš„MWCustomTFï¼Œç„¶åç›‘å¬editingChangedäº‹ä»¶ï¼Œåœ¨äº‹ä»¶é‡Œåˆ¤æ–­è¾“å…¥å­—ç¬¦æ˜¯å¦è¶…å‡ºæœ€å¤§è¾“å…¥é•¿åº¦ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536class MWCustomTF: UITextField &#123;    ...</div></div></div></a><a class="pagination-related" href="/2024/08/17/SwiftUINavigaiton%E7%94%A8%E6%B3%95/" title="SwiftUIä¸­navigationDestinationç”¨æ³•"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-17</div><div class="info-item-2">SwiftUIä¸­navigationDestinationç”¨æ³•</div></div><div class="info-2"><div class="info-item-1">èƒŒæ™¯æœ€è¿‘åš SwiftUI é¡¹ç›®ï¼Œä¹‹å‰å¯¹äº navigationDestination çš„ç”¨æ³•ç†è§£ä¸å¤ªæ·±åˆ»ï¼Œè§‰å¾—å¾ˆæ˜¯éš¾ç”¨ï¼Œæœ€è¿‘å‘ç°äº†æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚   åœºæ™¯å‡è®¾æœ‰ä¸€ä¸ª TabView ç±»ä¸º Aï¼ŒA æœ‰ Bã€C ä¸¤ä¸ªTabï¼ŒC çš„ Tab ä¸‹å­ç•Œé¢æœ‰ Dï¼ŒD çš„å­ç•Œé¢æœ‰ Eã€‚ å³æœ‰ A -&gt; B å’Œ A -&gt; C -&gt; D -&gt; E ä¸¤æ¡é“¾è·¯ã€‚ ä¹‹å‰çš„ç”¨æ³•æ˜¯: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556struct A: View &#123;    var body: some View &#123;        NavigationStack &#123;            TabView(selection: $selectedTab) &#123;                B()                C()            &#125;     ...</div></div></div></a><a class="pagination-related" href="/2022/09/05/%E4%BE%9D%E8%B5%96MapManagerSDK%E5%B4%A9%E6%BA%83%E8%AE%B0%E5%BD%95/" title="MapManagerSDKé›†æˆè®°å½•"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-05</div><div class="info-item-2">MapManagerSDKé›†æˆè®°å½•</div></div><div class="info-2"><div class="info-item-1">èƒŒæ™¯æœ€è¿‘é›†æˆMapManagerSDKï¼Œé‡åˆ°äº†å‡ ä¸ªé—®é¢˜è¿™é‡Œè®°å½•ä¸€ä¸‹ï¼š é—®é¢˜ä¸€ï¼š å¯¹æ¥æ–‡æ¡£ä¸­æç¤ºçš„å¯¼å…¥GMObjCç®—æ³•SDKæ–¹å¼å¦‚ä¸‹ï¼Œå¯¼å…¥åç¼–è¯‘ä¸é€šè¿‡ï¼Œæç¤ºï¼š&quot;sm2_plaintext_size&quot; Too many arguments to function call, expected 3, have 4   pod &#39;GMObjC&#39;,&#39;3.0.0&#39; é—®é¢˜äºŒï¼š å¯¼å…¥MapManageråï¼ŒQMUIåº“æˆ–è€…å…¶ä»–ç¬¬ä¸‰æ–¹åº“ï¼ŒåŸæœ¬æ­£å¸¸çš„ï¼Œç°åœ¨æŠ¥é”™ç¼–è¯‘ä¸é€šè¿‡ã€‚ é—®é¢˜ä¸‰ï¼š ä¸Šé¢éƒ½è§£å†³äº†ï¼Œç¼–è¯‘æˆåŠŸï¼Œä¸€å¯åŠ¨å°±å´©æºƒã€‚ è§£å†³ï¼šé—®é¢˜ä¸€&quot;sm2_plaintext_size&quot; Too many arguments to function call, expected 3, have 4çš„è§£å†³å¾ˆç®€å•ï¼Œæ”¹ä¸ºpod &#39;GMObjC&#39;ï¼Œå®‰è£…æœ€æ–°ç‰ˆå³å¯ã€‚ é—®é¢˜äºŒï¼ŒæŸ¥çœ‹åï¼Œå‘ç°æŠ¥é”™çš„åœ°æ–¹æ˜¯å±æ€§æˆ–è€…æ–¹æ³•ä¸­ä½¿ç”¨äº†debugæˆ–è€…releaseå®šä¹‰å˜é‡ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆä¹‹å‰æ²¡æœ‰é—®é¢˜ï¼Œå¯¼å…¥MapManagerSDKåï¼Œå°±æŠ¥é”™äº†å‘¢ï¼Ÿä»”ç»†æ’æŸ¥åå‘ç°...</div></div></div></a><a class="pagination-related" href="/2022/09/07/iOS%E7%BC%96%E8%AF%91%E6%97%B6%E9%97%B4%E4%BC%98%E5%8C%96/" title="iOS ç¼–è¯‘æ—¶é—´ä¼˜åŒ–"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-07</div><div class="info-item-2">iOS ç¼–è¯‘æ—¶é—´ä¼˜åŒ–</div></div><div class="info-2"><div class="info-item-1">èƒŒæ™¯ç›®å‰Appé¡¹ç›®ä¸å¤§ï¼Œä½†æ˜¯æ¸…ç©ºåé‡æ–°ç¼–è¯‘æ—¶é—´éœ€è¦200å¤šç§’ï¼Œæ„Ÿè§‰ä¸å¤ªåˆç†ï¼Œæ‰€ä»¥ï¼Œå°±ç€æ‰‹æ’æŸ¥äº†ä¸€ä¸‹ã€‚ é€šå¸¸çš„ç¼–è¯‘æ—¶é—´ä¼˜åŒ–éƒ½æ˜¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†  Xcodeç¼–è¯‘è®¾ç½®çš„ä¼˜åŒ– ä»£ç æˆ–å‡½æ•°ç¼–è¯‘æ—¶é—´çš„ä¼˜åŒ– ä¸‰æ–¹åº“ç¼–è¯‘æ—¶é—´çš„ä¼˜åŒ–  è¿™é‡Œå°±æ ¹æ®ä¸Šé¢ä¸‰ä¸ªéƒ¨åˆ†æ¥ä¸€ä¸€æ’æŸ¥ã€‚   å®ç°Xcodeç¼–è¯‘è®¾ç½®çš„ä¼˜åŒ–ä½¿ç”¨çš„æ˜¯Xcode 13.4ï¼Œç½‘ä¸Šæœåˆ°çš„ï¼Œå…³äºXcodeè®¾ç½®New Build Systemï¼ŒåŠBuild Settingsä¸­è®¾ç½®Debug Information Formatçš„éƒ½ä¸éœ€è¦è®¾ç½®äº†ï¼Œé»˜è®¤å·²ç»æ˜¯åˆç†çš„ã€‚è‡³äºOptimization Levelçš„è®¾ç½®ï¼Œè®¾ç½®åï¼Œè™½ç„¶ç¼–è¯‘é€Ÿåº¦å¯ä»¥æå‡ï¼Œä½†æ˜¯å¯¹äºDebugä¸å‹å¥½ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œä¹Ÿä¸åšè®¾ç½®ã€‚æ•…è€Œé’ˆå¯¹è¿™é¡¹ä¼˜åŒ–ä»€ä¹ˆéƒ½æ²¡æœ‰å¤„ç†ã€‚ ä»£ç æˆ–å‡½æ•°ç¼–è¯‘æ—¶é—´çš„ä¼˜åŒ–è¿™æ–¹é¢ä¸»è¦æ˜¯é’ˆå¯¹Swiftï¼Œé¦–å…ˆæŠŠç¼–è¯‘è€—æ—¶çš„æ–¹æ³•æ˜¾ç¤ºå‡ºæ¥ï¼Œåœ¨Build Settingsä¸­Other Swift Flagsæ·»åŠ å¦‚ä¸‹è®¾ç½®ï¼Œæ„æ€æ˜¯æ˜¾ç¤ºç¼–è¯‘è¶…è¿‡200msçš„å‡½æ•°æˆ–è€…ç±»å‹æ£€æŸ¥è¶…è¿‡300msçš„å‡½æ•°æ˜¾ç¤ºwarningï¼Œè¿™é‡Œ200msæ˜¯è‡ªå·±è®¾å®šï¼Œå¯é’ˆå¯¹é¡¹ç›®çš„çœŸå®æƒ…å†µè®¾ç½®ï¼š 1234-Xfrontend -w...</div></div></div></a><a class="pagination-related" href="/2025/08/20/Xcode26%E7%BC%96%E8%AF%91%E5%A4%B1%E8%B4%A5%E4%BF%AE%E6%94%B9/" title="Xcode 26ç¼–è¯‘å¤±è´¥ä¿®æ”¹"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-20</div><div class="info-item-2">Xcode 26ç¼–è¯‘å¤±è´¥ä¿®æ”¹</div></div><div class="info-2"><div class="info-item-1">èƒŒæ™¯ç”µè„‘å‡çº§MacOS 26.0ï¼Œæ–°å¢äº†ä¸€ä¸ªSDKåï¼ŒXcode26 Beta5å’ŒBeta6ï¼Œç¼–è¯‘é¡¹éƒ½æŠ¥é”™ï¼Œæç¤ºï¼šAssertion failed: (it != _dylibToOrdinal.end()), function dylibToOrdinal, file OutputFile.cpp, line 5196.   æ’æŸ¥è¿‡ç¨‹ åœ¨StackOverFlowä¸Šæœ‰çœ‹åˆ°è¯´ENABLE_DEBUG_DYLIB=NOï¼Œå°è¯•åæ— æ•ˆæœ åœ¨Xcode 26 Link Errorä¸­çœ‹åˆ°ï¼ŒAppleå®˜æ–¹äººå‘˜çš„å›å¤ï¼Œè¦æ·»åŠ -Xlinker -dead_strip -Xlinker -allow_dead_duplicates.  è§£å†³åŠæ³•é€šè¿‡ Other Linker Flags ä¿®æ”¹è¿›å…¥ Target çš„ Build Settings æ ‡ç­¾ï¼šé€‰ä¸­ Target â†’ Build Settings â†’ æœç´¢ Other Linker Flagsã€‚æ‰‹åŠ¨ä¿®æ”¹é“¾æ¥å‚æ•°ï¼šç‚¹å‡» Other Linker Flagsï¼Œé¦–å…ˆç§»é™¤ 12-ld64 -ld_classic  ç„¶åæ·»åŠ  1234-Xlinker ...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/assets/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">ä»Šæ˜¯æ˜¨é</div><div class="author-info-description">æŠ€æœ¯åˆ†äº«ã€ç”Ÿæ´»æ„Ÿæ‚Ÿ</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">188</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mokong"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/mokong" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://x.com/morgan2015_wang" target="_blank" title="Twitter"><i class="fab fa-X"></i></a><a class="social-icon" href="mailto:mokong.2015.1992@email.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#iOS-%E5%B7%A5%E4%BD%9C%E6%97%A5%E2%80%94%E2%80%94%E8%BF%87%E6%BB%A4%E6%B3%95%E5%AE%9A%E8%8A%82%E5%81%87%E6%97%A5%E6%97%A5%E5%8E%86%E6%8F%90%E9%86%92%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.</span> <span class="toc-text">iOS å·¥ä½œæ—¥â€”â€”è¿‡æ»¤æ³•å®šèŠ‚å‡æ—¥æ—¥å†æé†’çš„å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-number">1.1.</span> <span class="toc-text">èƒŒæ™¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.2.</span> <span class="toc-text">å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%8C%E5%85%88%E5%88%9B%E5%BB%BA%E5%91%A8%E4%B8%80%E5%88%B0%E5%91%A8%E4%BA%94%E7%9A%84%E9%87%8D%E5%A4%8D%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.2.1.</span> <span class="toc-text">ç¬¬ä¸€æ­¥ï¼Œå…ˆåˆ›å»ºå‘¨ä¸€åˆ°å‘¨äº”çš„é‡å¤äº‹ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%8C%E6%B7%BB%E5%8A%A0%E6%B3%95%E5%AE%9A%E8%8A%82%E5%81%87%E6%97%A5%E9%80%BB%E8%BE%91"><span class="toc-number">1.2.2.</span> <span class="toc-text">ç¬¬äºŒæ­¥ï¼Œæ·»åŠ æ³•å®šèŠ‚å‡æ—¥é€»è¾‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="toc-number">1.2.3.</span> <span class="toc-text">æ€»ç»“ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">1.3.</span> <span class="toc-text">å‚è€ƒ</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/22/Google%20Antigravity%20%E7%99%BB%E5%BD%95%E4%B8%8D%E4%BA%86%E8%A7%A3%E5%86%B3/" title="Google çš„ Antigravityç™»å½•ä¸äº†è§£å†³">Google çš„ Antigravityç™»å½•ä¸äº†è§£å†³</a><time datetime="2026-01-22T02:48:00.000Z" title="å‘è¡¨äº 2026-01-22 10:48:00">2026-01-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/22/%E5%85%B3%E4%BA%8E%20AI%20%E4%B8%8E%E5%BC%80%E5%8F%91/" title="å…³äº AI ä¸å¼€å‘">å…³äº AI ä¸å¼€å‘</a><time datetime="2026-01-22T02:48:00.000Z" title="å‘è¡¨äº 2026-01-22 10:48:00">2026-01-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/21/%E8%BF%9E%E5%A4%9C%E5%BC%80%E5%8F%91%E4%BA%86%E4%B8%80%E4%B8%AA%20Mac%20%E4%B8%8A%E4%B9%85%E5%9D%90%E6%8F%90%E9%86%92%E5%B7%A5%E5%85%B7/" title="è¿å¤œå¼€å‘äº†ä¸€ä¸ª Mac ä¸Šä¹…åæé†’å·¥å…·">è¿å¤œå¼€å‘äº†ä¸€ä¸ª Mac ä¸Šä¹…åæé†’å·¥å…·</a><time datetime="2026-01-21T09:22:00.000Z" title="å‘è¡¨äº 2026-01-21 17:22:00">2026-01-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/13/%E9%B8%BF%E8%92%99%E6%88%AA%E5%9B%BE%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7/" title="æ— æ ‡é¢˜">æ— æ ‡é¢˜</a><time datetime="2025-10-13T07:24:22.000Z" title="å‘è¡¨äº 2025-10-13 15:24:22">2025-10-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/28/%E4%BD%BF%E7%94%A8%E4%B8%80%E8%A1%8C%E5%91%BD%E4%BB%A4%E5%AE%9E%E7%8E%B0OpenConnect%E8%BF%9E%E6%8E%A5%E5%86%85%E7%BD%91/" title="æ— æ ‡é¢˜">æ— æ ‡é¢˜</a><time datetime="2025-09-28T07:28:52.000Z" title="å‘è¡¨äº 2025-09-28 15:28:52">2025-09-28</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2026 By ä»Šæ˜¯æ˜¨é</span><span class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 5.4.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div><div class="footer_custom_text"><span>æ—¥å‡ºæ±ŸèŠ±çº¢èƒœç«ï¼Œæ˜¥æ¥æ±Ÿæ°´ç»¿å¦‚è“ï¼Œèƒ½ä¸å¿†æ±Ÿå—</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><div class="js-pjax"></div><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      false
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>