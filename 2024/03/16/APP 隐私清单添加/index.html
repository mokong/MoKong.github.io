<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>APP 隐私清单添加 | 今是昨非的博客</title><meta name="author" content="今是昨非"><meta name="copyright" content="今是昨非"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="​# APP 隐私清单添加 背景今天送审 APP，提交审核后，邮箱收到了ITMS-91053: Missing API declaration的提示，查看后，发现是缺少隐私清单的提醒。如下图：">
<meta property="og:type" content="article">
<meta property="og:title" content="APP 隐私清单添加">
<meta property="og:url" content="http://morganwang.cn/2024/03/16/APP%20%E9%9A%90%E7%A7%81%E6%B8%85%E5%8D%95%E6%B7%BB%E5%8A%A0/index.html">
<meta property="og:site_name" content="今是昨非的博客">
<meta property="og:description" content="​# APP 隐私清单添加 背景今天送审 APP，提交审核后，邮箱收到了ITMS-91053: Missing API declaration的提示，查看后，发现是缺少隐私清单的提醒。如下图：">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://morganwang.cn/assets/img/avatar.jpeg">
<meta property="article:published_time" content="2024-03-16T02:25:00.000Z">
<meta property="article:modified_time" content="2024-03-26T06:39:14.000Z">
<meta property="article:author" content="今是昨非">
<meta property="article:tag" content="技术">
<meta property="article:tag" content="iOS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://morganwang.cn/assets/img/avatar.jpeg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "APP 隐私清单添加",
  "url": "http://morganwang.cn/2024/03/16/APP%20%E9%9A%90%E7%A7%81%E6%B8%85%E5%8D%95%E6%B7%BB%E5%8A%A0/",
  "image": "http://morganwang.cn/assets/img/avatar.jpeg",
  "datePublished": "2024-03-16T02:25:00.000Z",
  "dateModified": "2024-03-26T06:39:14.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "今是昨非",
      "url": "http://morganwang.cn"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://morganwang.cn/2024/03/16/APP%20%E9%9A%90%E7%A7%81%E6%B8%85%E5%8D%95%E6%B7%BB%E5%8A%A0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'APP 隐私清单添加',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/assets/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">190</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://images.unsplash.com/photo-1477346611705-65d1883cee1e);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">今是昨非的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">APP 隐私清单添加</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">APP 隐私清单添加</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-03-16T02:25:00.000Z" title="发表于 2024-03-16 10:25:00">2024-03-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-03-26T06:39:14.000Z" title="更新于 2024-03-26 14:39:14">2024-03-26</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>​# APP 隐私清单添加</p>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>今天送审 APP，提交审核后，邮箱收到了<code>ITMS-91053: Missing API declaration</code>的提示，查看后，发现是缺少隐私清单的提醒。如下图：</p>
<span id="more"></span>

<p>记得年初的时候，曾经看到过苹果发布这个的通知（<a target="_blank" rel="noopener" href="https://developer.apple.com/news/?id=z6fu1dcu">List of APIs that require declared reasons now available</a>），但是当时没有在意，也不知道如何实现，所以就没有管。现在既然提醒了，就说明强制了需要修改。</p>
<p>网上查阅了之后，发现，只有腾讯的这篇<a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/269/104138">苹果隐私策略：PrivacyInfo.xcprivacy</a>，比较合用，再结合下面的图片，就可以看出用法，和对应 key 的意义。</p>
<p><img src="https://raw.githubusercontent.com/mokong/BlogImages/main/Apple%E7%90%86%E7%94%B1%E5%A3%B0%E6%98%8E%E9%9A%90%E7%A7%81API%E6%B8%85%E5%8D%95(List%20of%20APIs%20that%20require%20declared%20reasons).jpg" alt="Apple理由声明隐私API清单(List of APIs that require declared reasons"></p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>具体使用，选中项目，CMD + N，搜索<code>privacy</code>，然后选择类型<code>App Privacy</code>，输入名称<code>PrivacyInfo.xcprivacy</code>，如下图，选择要添加的<code>Target</code>，然后点击完成。</p>
<p><img src="https://raw.githubusercontent.com/mokong/BlogImages/main/screenshot-20240315-184410.png" alt="创建 App Privacy"></p>
<p>然后选中<code>PrivacyInfo.xcprivacy</code>，右键选择<code>Open As -&gt; Source Code</code>，如下图：</p>
<p><img src="https://raw.githubusercontent.com/mokong/BlogImages/main/screenshot-20240316-101859.png" alt="Open As -&gt; Source Code"></p>
<p>然后参考腾讯的这篇<a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/269/104138">苹果隐私策略：PrivacyInfo.xcprivacy</a>，拷贝里面的内容，可以参照邮件提醒缺失的key，选择添加到<code>PrivacyInfo.xcprivacy</code>中，附录内容如下：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;?</span>xml version<span class="operator">=</span><span class="string">&quot;1.0&quot;</span> encoding<span class="operator">=</span><span class="string">&quot;UTF-8&quot;</span><span class="operator">?&gt;</span></span><br><span class="line"><span class="operator">&lt;!</span><span class="type">DOCTYPE</span> plist <span class="type">PUBLIC</span> <span class="string">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span> <span class="string">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span>plist version<span class="operator">=</span><span class="string">&quot;1.0&quot;</span><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;</span>dict<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>key<span class="operator">&gt;</span><span class="type">NSPrivacyTracking</span>&lt;/key&gt;</span><br><span class="line">    <span class="operator">&lt;</span><span class="literal">false</span><span class="operator">/&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>key<span class="operator">&gt;</span><span class="type">NSPrivacyCollectedDataTypes</span>&lt;/key&gt;</span><br><span class="line">    <span class="operator">&lt;</span>array<span class="operator">/&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>key<span class="operator">&gt;</span><span class="type">NSPrivacyTrackingDomains</span>&lt;/key&gt;</span><br><span class="line">    <span class="operator">&lt;</span>array<span class="operator">/&gt;</span></span><br><span class="line">    <span class="operator">&lt;</span>key<span class="operator">&gt;</span><span class="type">NSPrivacyAccessedAPITypes</span>&lt;/key&gt;</span><br><span class="line">    <span class="operator">&lt;</span>array<span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;</span>dict<span class="operator">&gt;</span></span><br><span class="line">            <span class="operator">&lt;</span>key<span class="operator">&gt;</span><span class="type">NSPrivacyAccessedAPIType</span>&lt;/key&gt;</span><br><span class="line">            <span class="operator">&lt;</span>string<span class="operator">&gt;</span><span class="type">NSPrivacyAccessedAPICategorySystemBootTime</span>&lt;/string&gt;</span><br><span class="line">            <span class="operator">&lt;</span>key<span class="operator">&gt;</span><span class="type">NSPrivacyAccessedAPITypeReasons</span>&lt;/key&gt;</span><br><span class="line">            <span class="operator">&lt;</span>array<span class="operator">&gt;</span></span><br><span class="line">                <span class="operator">&lt;</span>string<span class="operator">&gt;</span>35F9.<span class="number">1</span><span class="operator">&lt;/</span>string<span class="operator">&gt;</span></span><br><span class="line">            <span class="operator">&lt;/</span>array<span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;/</span>dict<span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;</span>dict<span class="operator">&gt;</span></span><br><span class="line">            <span class="operator">&lt;</span>key<span class="operator">&gt;</span><span class="type">NSPrivacyAccessedAPIType</span>&lt;/key&gt;</span><br><span class="line">            <span class="operator">&lt;</span>string<span class="operator">&gt;</span><span class="type">NSPrivacyAccessedAPICategoryDiskSpace</span>&lt;/string&gt;</span><br><span class="line">            <span class="operator">&lt;</span>key<span class="operator">&gt;</span><span class="type">NSPrivacyAccessedAPITypeReasons</span>&lt;/key&gt;</span><br><span class="line">            <span class="operator">&lt;</span>array<span class="operator">&gt;</span></span><br><span class="line">                <span class="operator">&lt;</span>string<span class="operator">&gt;</span><span class="type">E174</span>.<span class="number">1</span><span class="operator">&lt;/</span>string<span class="operator">&gt;</span></span><br><span class="line">            <span class="operator">&lt;/</span>array<span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;/</span>dict<span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;</span>dict<span class="operator">&gt;</span></span><br><span class="line">            <span class="operator">&lt;</span>key<span class="operator">&gt;</span><span class="type">NSPrivacyAccessedAPIType</span>&lt;/key&gt;</span><br><span class="line">            <span class="operator">&lt;</span>string<span class="operator">&gt;</span><span class="type">NSPrivacyAccessedAPICategoryFileTimestamp</span>&lt;/string&gt;</span><br><span class="line">            <span class="operator">&lt;</span>key<span class="operator">&gt;</span><span class="type">NSPrivacyAccessedAPITypeReasons</span>&lt;/key&gt;</span><br><span class="line">            <span class="operator">&lt;</span>array<span class="operator">&gt;</span></span><br><span class="line">                <span class="operator">&lt;</span>string<span class="operator">&gt;</span><span class="type">C617</span>.<span class="number">1</span><span class="operator">&lt;/</span>string<span class="operator">&gt;</span></span><br><span class="line">            <span class="operator">&lt;/</span>array<span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;/</span>dict<span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;</span>dict<span class="operator">&gt;</span></span><br><span class="line">            <span class="operator">&lt;</span>key<span class="operator">&gt;</span><span class="type">NSPrivacyAccessedAPIType</span>&lt;/key&gt;</span><br><span class="line">            <span class="operator">&lt;</span>string<span class="operator">&gt;</span><span class="type">NSPrivacyAccessedAPICategoryUserDefaults</span>&lt;/string&gt;</span><br><span class="line">            <span class="operator">&lt;</span>key<span class="operator">&gt;</span><span class="type">NSPrivacyAccessedAPITypeReasons</span>&lt;/key&gt;</span><br><span class="line">            <span class="operator">&lt;</span>array<span class="operator">&gt;</span></span><br><span class="line">                <span class="operator">&lt;</span>string<span class="operator">&gt;</span><span class="type">CA92</span>.<span class="number">1</span><span class="operator">&lt;/</span>string<span class="operator">&gt;</span></span><br><span class="line">            <span class="operator">&lt;/</span>array<span class="operator">&gt;</span></span><br><span class="line">        <span class="operator">&lt;/</span>dict<span class="operator">&gt;</span></span><br><span class="line">    <span class="operator">&lt;/</span>array<span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;/</span>dict<span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&lt;/</span>plist<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p>建议步骤，先参照上面理解对应 key的意义，然后明确使用方法，再结合项目实际情况，用到了哪些，添加哪些。然后打包提交 APP，送审后，如果收到邮件提示，然后按照提示里提醒缺失了哪些 key，再补充添加即可。</p>
<p>注意如果是用了<code>pushExtension</code>或者<code>widget</code>之类的，也需要添加<code>PrivacyInfo.xcprivacy</code>文件，和上面的步骤类似参考邮件提醒缺失的key，选择添加到<code>PrivacyInfo.xcprivacy</code>中。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/269/104138">苹果隐私策略：PrivacyInfo.xcprivacy</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/7280007176763949092">Apple理由声明隐私API清单(List of APIs that require declared reasons)</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.apple.com/news/?id=z6fu1dcu">List of APIs that require declared reasons now available</a></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://morganwang.cn">今是昨非</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://morganwang.cn/2024/03/16/APP%20%E9%9A%90%E7%A7%81%E6%B8%85%E5%8D%95%E6%B7%BB%E5%8A%A0/">http://morganwang.cn/2024/03/16/APP%20%E9%9A%90%E7%A7%81%E6%B8%85%E5%8D%95%E6%B7%BB%E5%8A%A0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://morganwang.cn" target="_blank">今是昨非的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%8A%80%E6%9C%AF/">技术</a><a class="post-meta__tags" href="/tags/iOS/">iOS</a></div><div class="post-share"><div class="social-share" data-image="/assets/img/avatar.jpeg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/03/16/Pod%20%E7%A7%81%E6%9C%89%E5%BA%93%E7%9A%84%E7%9B%B8%E4%BA%92%E5%BC%95%E7%94%A8/" title="Pod 私有库相互引用"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Pod 私有库相互引用</div></div><div class="info-2"><div class="info-item-1">私有库的相互引用文章是转载自OC和Swift混合开发(Pod私有库的相互引用)，在这里记录一下，方便以后查看。   概述：该文档主要介绍OC和Swift混合开发相互调用，包括3大类情况和12种具体情形。 三大类情况：  主工程内的混合互调，  主工程和Pod三方库之间的混合互调，  Pod三方库和其他Pod三方库之间的混合互调。   十二种情形：  主工程内的OC 调用 主工程内的OC：#import “NSObject.h”   导入头文件直接调用。   主工程内的OC 调用 主工程内的Swift：   1. 主工程中创建.pch文件，在TARGETS -&gt; Build Setting -&gt; 搜索pch -&gt; 设置.pch文件的路径，     2. 在.pch文件中添加 ：       例如：#import “xxxxx_Swift.h”        (该文件命名规则为：”工程名_Swift.h”，该文件为系统自动生成) ，    3. 编译之后才可自动识别需要调用的Swift的文件 。  主工程内的OC 调用 OC的Pod三方库：     #import ...</div></div></div></a><a class="pagination-related" href="/2024/03/13/Xcode%2015.3%20Archive%E5%A4%B1%E8%B4%A5/" title="Xcode 15.3 Archive失败"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Xcode 15.3 Archive失败</div></div><div class="info-2"><div class="info-item-1">Xcode 15.3 Archive失败背景昨晚升级 Xcode 到 15.3，今天打包的时候发现 Archive 失败，提示：Call parameter type does not match function signature!，仔细看报错里是和HandyJSON相关的提示。   解决起初以为和 Pod 库有关系，但是找同事确认后，发现低于 Xcode 15.3 的版本是可以打包成功的，但是 Xcode 15.3 的版本就报错了。然后搜索HandyJSON Call parameter type does not match function signature!，发现了这个，Building HandyJSON in Swift 5.10 throws a fatal error ，是Swift 5.10 编译 HandyJSON报错了。目前HandyJSON官方还未解决。 暂时的解决方法是： 在 Pod 的 Target 中找到 HandyJSON, 然后设置Optimization Level为 None和No Optimization，如下图：  然后再次尝试 A...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/01/06/Swift%20%E5%90%8E%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="Swift后缀表达式(逆波兰式)转换计算"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-06</div><div class="info-item-2">Swift后缀表达式(逆波兰式)转换计算</div></div><div class="info-2"><div class="info-item-1">Swift后缀表达式(逆波兰式)转换计算背景最近在开发《挑战24点》的过程中遇到了一个问题，即，如何计算常用数学表达式的结果，即，给定字符串8 - (6 + 4 / 2 - 1) * 2，怎么计算得到结果，并且得到计算的过程。 网上查资料发现，大部分都是类似系统计算器的处理，在遇到第二个运算符时，就把前一步的操作结果计算出来。这样的处理方式并不适用于笔者想要解决的问题。   进一步搜索后发现，前缀表达式、中缀表达式、后缀表达式的概念，给定的字符串8 - (6 + 4 / 2 - 1) * 2属于中缀表达式，而想要计算机得出结果，可以转为前缀表达式或者后缀表达式，然后再对转换后的表达式进行计算。     这里采用中缀表达式转后缀表达式，然后计算后缀表达式得出结果，步骤如下。 Swift 中缀表达式转后缀表达式什么是中缀表达式、后缀表达式？首先理解中缀表达式和后缀表达式分别是什么？  中缀表达式: 是常用的算术表示方法，操作符处于操作数的中间，比如 (a + b)，即中缀形式，故而称之为中缀表达式。 后缀表达式: 运算符写在操作数之后，比如 (a, b, +)，称之为后缀表达式，又名...</div></div></div></a><a class="pagination-related" href="/2024/04/19/Mac%E6%89%AB%E6%8F%8FiOS%E6%8F%8F%E8%BF%B0%E6%96%87%E4%BB%B6/" title="Python实现提醒iOS描述文件有效期"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-19</div><div class="info-item-2">Python实现提醒iOS描述文件有效期</div></div><div class="info-2"><div class="info-item-1">Python实现提醒iOS描述文件有效期背景公司企业APP描述文件过期，没有提醒，导致当天出现不可用的问题。 为了避免再发生类似的问题，笔者想要写一个Python脚本，读取描述文件，获取有效期，设置提醒，且自动运行。    实现首先再来理一下思路，所有的描述文件都在~/Library/MobileDevice/Provisioning Profiles/目录下，但是里面的内容通常不会自动删除，过期的或者重复的都在这个目录中，而且这个目录下的文件名是uuid命名的和Xcode中的文件名字也不能直接对应，所以一眼看去，只能用一个字形容：乱。 如果账号是管理员，直接登录在电脑上，项目中用的自动管理描述文件的，还好一些，现在会自动续期。但是如果账号是开发者，发布的描述文件没有权限用自动管理的，就需要注意这个描述文件有效期的问题。 再来理一下思路，想要的是一个读取描述文件夹下所有描述文件，获取描述文件中的内容，根据有效期，设置提醒，且自动运行的脚本。 那这里面最重要的是什么？是获取描述文件的内容，这关系到这个思路是否可行。 获取描述文件的内容首先，来看下，描述文件的格式是uuid.mobi...</div></div></div></a><a class="pagination-related" href="/2024/02/19/RxSwfit%E5%AE%9E%E7%8E%B0%E6%90%9C%E7%B4%A2/" title="RxSwfit 使用"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-19</div><div class="info-item-2">RxSwfit 使用</div></div><div class="info-2"><div class="info-item-1">RxSwift使用备忘RxSwift 常用方法使用，这里记录一下。   RxSwfit实现搜索distinctUntilChanged的作用是，相邻的重复事件不产生新的事件，所以搜索中使用distinctUntilChanged可以保证只有每次触发的搜索都是不同的字符串，也可以保证输入停止后只会触发一次搜索。 throttle 和 debounce 的区别：  throttle 每隔固定时间调用 debounce 事件停止后隔多少秒调用  所以，如果需要实现输入中搜索，使用 throttle  1234567891011fileprivate func configureSearch() &#123;  searchBar.rx.text        .orEmpty        .throttle(1.0, scheduler: MainScheduler.instance)        .distinctUntilChanged()        .subscribe &#123; [unowned self] (query) in                   ...</div></div></div></a><a class="pagination-related" href="/2024/08/17/FirebaseFunctionError%E5%A4%84%E7%90%86/" title="FirebaseFunctionError 处理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-17</div><div class="info-item-2">FirebaseFunctionError 处理</div></div><div class="info-2"><div class="info-item-1">背景做一个 Firebase 相关的项目，其中创建用户的时候，用的是Cloud Functions，调用的时候一直报错，错误信息只有”INTERNAL”。 Deploying Function Error on Cloud Function with error code 13 and Message “INTERNAL”   排查步骤网上搜索之后，有说字段不对应的，有说调用方式不对的，但是尝试后把这两个原因都排除了。 然后去 Firebase 的 Console 中查看，找到 Function，再找到调用的函数名字，点击右侧的竖三角，查看详细信息，发现里面错误信息为空。不要急，点击顶部 Tab，切换到 日志 下，然后从日志中查看报错信息，就能看到调用这个函数哪里报错了。具体步骤的截图如下：  </div></div></div></a><a class="pagination-related" href="/2022/09/05/Carthage%E4%BD%BF%E7%94%A8/" title="Carthage使用"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-05</div><div class="info-item-2">Carthage使用</div></div><div class="info-2"><div class="info-item-1">背景之前一直用CocoaPods，这次做编译时间优化时，把某些Pod依赖的库改为了Carthage依赖的，这里记录一下Carthage的使用。   使用安装使用brew安装，简单方便 1brew install carthage  使用在项目所在文件夹，即.xcodeproj所在的文件夹下，创建Cartfile 1touch Cartfile  然后打开Cartfile 1open Cartfile -a Xcode  添加要依赖的第三方库，注意依赖版本的指定，指定版本和指定范围的写法，如下： 1234567891011github &quot;krzyzanowskim/CryptoSwift&quot; ~&gt; 1.4.0github &quot;evgenyneu/keychain-swift&quot; ~&gt; 19.0github &quot;ibireme/YYKit&quot;github &quot;ReactiveX/RxSwift&quot; &quot;6.5.0&quot;github &quot;onevcat/Kingfisher&quot; ...</div></div></div></a><a class="pagination-related" href="/2019/09/28/Mapping%20architecture%20armv7%20to%20i386/" title="Mapping architecture armv7 to i386"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2019-09-28</div><div class="info-item-2">Mapping architecture armv7 to i386</div></div><div class="info-2"><div class="info-item-1">最近项目里升级后，编译警告多了起来，看起来好碍眼，就想着改掉，先从Debug warning: Mapping architecture armv7 to i386.这个开始。   看了警告之后，知道是对应target下的Build Settings里architecture的问题，然后去检查对应target下，发现today widget、iwatch widget里Valid Architectures的Release跟Debug不一致，然后就手动修改为 $(ARCHS_STANDARD)，编译，done，完美解决。 </div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/assets/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">今是昨非</div><div class="author-info-description">技术分享、生活感悟</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">190</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mokong"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/mokong" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://x.com/morgan2015_wang" target="_blank" title="Twitter"><i class="fab fa-X"></i></a><a class="social-icon" href="mailto:mokong.2015.1992@email.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-number">1.</span> <span class="toc-text">背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.</span> <span class="toc-text">实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">3.</span> <span class="toc-text">参考</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/27/CodeBuddyCN%20%E4%BD%BF%E7%94%A8%E5%85%8D%E8%B4%B9%E7%9A%84%E4%B8%83%E7%89%9B%20Model%20%E6%AD%A5%E9%AA%A4/" title="CodeBuddyCN 使用免费的七牛 Model 步骤">CodeBuddyCN 使用免费的七牛 Model 步骤</a><time datetime="2026-01-27T11:49:00.000Z" title="发表于 2026-01-27 19:49:00">2026-01-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/22/Google%20Antigravity%20%E7%99%BB%E5%BD%95%E4%B8%8D%E4%BA%86%E8%A7%A3%E5%86%B3/" title="Google Antigravity 登录不了解决">Google Antigravity 登录不了解决</a><time datetime="2026-01-22T02:38:00.000Z" title="发表于 2026-01-22 10:38:00">2026-01-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/21/%E8%BF%9E%E5%A4%9C%E5%BC%80%E5%8F%91%E4%BA%86%E4%B8%80%E4%B8%AA%20Mac%20%E4%B8%8A%E4%B9%85%E5%9D%90%E6%8F%90%E9%86%92%E5%B7%A5%E5%85%B7/" title="连夜开发了一个 Mac 上久坐提醒工具">连夜开发了一个 Mac 上久坐提醒工具</a><time datetime="2026-01-21T13:45:00.000Z" title="发表于 2026-01-21 21:45:00">2026-01-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/20/%E5%85%B3%E4%BA%8E%20AI%20%E4%B8%8E%E5%BC%80%E5%8F%91/" title="关于 AI 与开发">关于 AI 与开发</a><time datetime="2026-01-20T11:41:00.000Z" title="发表于 2026-01-20 19:41:00">2026-01-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/16/%E5%88%B6%E4%BD%9C%E8%87%AA%E5%B7%B1%E8%A1%A8%E6%83%85%E5%8C%85/" title="制作自己表情包">制作自己表情包</a><time datetime="2026-01-16T02:21:00.000Z" title="发表于 2026-01-16 10:21:00">2026-01-16</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2026 By 今是昨非</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 5.4.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div><div class="footer_custom_text"><span>日出江花红胜火，春来江水绿如蓝，能不忆江南</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><div class="js-pjax"></div><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      false
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>