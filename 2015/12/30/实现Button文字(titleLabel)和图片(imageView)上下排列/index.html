<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>实现Button文字(titleLabel)和图片(imageView)上下排列 | 今是昨非的博客</title><meta name="author" content="今是昨非"><meta name="copyright" content="今是昨非"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="实现Button文字(titleLabel)和图片(imageView)上下排列 1、我最开始实现这个采用的方法：重新自定义一个view，然后有两个属性label和imageView，然后设置位置布局，再添加单击手势，用代理回传点击方法。">
<meta property="og:type" content="article">
<meta property="og:title" content="实现Button文字(titleLabel)和图片(imageView)上下排列">
<meta property="og:url" content="http://morganwang.cn/2015/12/30/%E5%AE%9E%E7%8E%B0Button%E6%96%87%E5%AD%97(titleLabel)%E5%92%8C%E5%9B%BE%E7%89%87(imageView)%E4%B8%8A%E4%B8%8B%E6%8E%92%E5%88%97/index.html">
<meta property="og:site_name" content="今是昨非的博客">
<meta property="og:description" content="实现Button文字(titleLabel)和图片(imageView)上下排列 1、我最开始实现这个采用的方法：重新自定义一个view，然后有两个属性label和imageView，然后设置位置布局，再添加单击手势，用代理回传点击方法。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://morganwang.cn/assets/img/avatar.jpeg">
<meta property="article:published_time" content="2015-12-30T10:04:00.000Z">
<meta property="article:modified_time" content="2024-01-22T11:04:42.000Z">
<meta property="article:author" content="今是昨非">
<meta property="article:tag" content="技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://morganwang.cn/assets/img/avatar.jpeg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "实现Button文字(titleLabel)和图片(imageView)上下排列",
  "url": "http://morganwang.cn/2015/12/30/%E5%AE%9E%E7%8E%B0Button%E6%96%87%E5%AD%97(titleLabel)%E5%92%8C%E5%9B%BE%E7%89%87(imageView)%E4%B8%8A%E4%B8%8B%E6%8E%92%E5%88%97/",
  "image": "http://morganwang.cn/assets/img/avatar.jpeg",
  "datePublished": "2015-12-30T10:04:00.000Z",
  "dateModified": "2024-01-22T11:04:42.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "今是昨非",
      "url": "http://morganwang.cn"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://morganwang.cn/2015/12/30/%E5%AE%9E%E7%8E%B0Button%E6%96%87%E5%AD%97(titleLabel)%E5%92%8C%E5%9B%BE%E7%89%87(imageView)%E4%B8%8A%E4%B8%8B%E6%8E%92%E5%88%97/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '实现Button文字(titleLabel)和图片(imageView)上下排列',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/assets/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">189</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://images.unsplash.com/photo-1477346611705-65d1883cee1e);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">今是昨非的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">实现Button文字(titleLabel)和图片(imageView)上下排列</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">实现Button文字(titleLabel)和图片(imageView)上下排列</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2015-12-30T10:04:00.000Z" title="发表于 2015-12-30 18:04:00">2015-12-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-22T11:04:42.000Z" title="更新于 2024-01-22 19:04:42">2024-01-22</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="实现Button文字-titleLabel-和图片-imageView-上下排列"><a href="#实现Button文字-titleLabel-和图片-imageView-上下排列" class="headerlink" title="实现Button文字(titleLabel)和图片(imageView)上下排列"></a>实现Button文字(titleLabel)和图片(imageView)上下排列</h1><blockquote>
<p>1、我最开始实现这个采用的方法：<br>重新自定义一个view，然后有两个属性label和imageView，然后设置位置布局，再添加单击手势，用代理回传点击方法。</p>
</blockquote>
<span id="more"></span>

<blockquote>
<p>2、第二种方法：<br>自定义一个Button继承Button，有两个属性label和imageView，然后设置布局。这样就不用添加单击手势。</p>
</blockquote>
<blockquote>
<p>3、第三种方法：<br>直接用Button自带的titleLabel和imageView，写个Category，用来设置label和image的排列方式，eg：上下、左右</p>
</blockquote>
<p>明显前两种是很不好的，所以这里只说第三种：</p>
<blockquote>
<p>Button有两个属性：titleEdgeInsets和imageEdgeInsets，通过设置这两个，就可以实现所有需要的Button的样式，如：image在上、image在下、image在左、image在右。</p>
</blockquote>
<p>在设置这两个之前，我们先要理解Button上面的titleLabel和imageView的位置关系（想象Button默认的image和label的显示）：</p>
<blockquote>
<ol>
<li>titleEdgeInsets是titleLabel相对于其上下左右的inset，跟tableView的contentInset是类似的；</li>
<li> 如果只有title，那titleLabel的 <strong>上下左右</strong> 都是 <strong>相对于Button</strong> 的；</li>
<li>如果只有image，那imageView的 <strong>上下左右</strong> 都是 <strong>相对于Button</strong> 的；</li>
<li>如果同时有image和label，那image的 <strong>上下左</strong> 是 <strong>相对于Button</strong> 的，<strong>右</strong> 是 <strong>相对于label</strong> 的；<br>label的 <strong>上下右</strong> 是 <strong>相对于Button的</strong>， <strong>左</strong> 是 <strong>相对于label</strong> 的。</li>
</ol>
</blockquote>
<h2 id="上面一段很重要"><a href="#上面一段很重要" class="headerlink" title="上面一段很重要"></a>上面一段很重要</h2><p>理解了，然后我们就可以看懂下面的代码</p>
<blockquote>
<ol>
<li>创建一个Button的Category，.h文件如下，定义一个Enum，用于决定image和label的样式；一个方法用于调用设置。</li>
</ol>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line">typedef NS_ENUM(NSUInteger, MKButtonEdgeInsetsStyle) &#123;</span><br><span class="line">    MKButtonEdgeInsetsStyleTop, // image在上，label在下</span><br><span class="line">    MKButtonEdgeInsetsStyleLeft, // image在左，label在右</span><br><span class="line">    MKButtonEdgeInsetsStyleBottom, // image在下，label在上</span><br><span class="line">    MKButtonEdgeInsetsStyleRight // image在右，label在左</span><br><span class="line">&#125;;</span><br><span class="line">@interface UIButton (ImageTitleSpacing)</span><br><span class="line">/**</span><br><span class="line"> *  设置button的titleLabel和imageView的布局样式，及间距</span><br><span class="line"> *</span><br><span class="line"> *  @param style titleLabel和imageView的布局样式</span><br><span class="line"> *  @param space titleLabel和imageView的间距</span><br><span class="line"> */</span><br><span class="line">- (void)layoutButtonWithEdgeInsetsStyle:(MKButtonEdgeInsetsStyle)style</span><br><span class="line">                        imageTitleSpace:(CGFloat)space;</span><br></pre></td></tr></table></figure>

<blockquote>
<ol start="2">
<li>.m文件如下，实现方法</li>
</ol>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#import &quot;UIButton+ImageTitleSpacing.h&quot;</span><br><span class="line">@implementation UIButton (ImageTitleSpacing)</span><br><span class="line">- (void)layoutButtonWithEdgeInsetsStyle:(MKButtonEdgeInsetsStyle)style</span><br><span class="line">                        imageTitleSpace:(CGFloat)space</span><br><span class="line">&#123;</span><br><span class="line">    // 1. 得到imageView和titleLabel的宽、高</span><br><span class="line">    CGFloat imageWith = self.imageView.frame.size.width;</span><br><span class="line">    CGFloat imageHeight = self.imageView.frame.size.height;</span><br><span class="line">    </span><br><span class="line">    CGFloat labelWidth = 0.0;</span><br><span class="line">    CGFloat labelHeight = 0.0;</span><br><span class="line">    if ([UIDevice currentDevice].systemVersion.floatValue &gt;= 8.0) &#123;</span><br><span class="line">        // 由于iOS8中titleLabel的size为0，用下面的这种设置</span><br><span class="line">        labelWidth = self.titleLabel.intrinsicContentSize.width;</span><br><span class="line">        labelHeight = self.titleLabel.intrinsicContentSize.height;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        labelWidth = self.titleLabel.frame.size.width;</span><br><span class="line">        labelHeight = self.titleLabel.frame.size.height;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 2. 声明全局的imageEdgeInsets和labelEdgeInsets</span><br><span class="line">    UIEdgeInsets imageEdgeInsets = UIEdgeInsetsZero;</span><br><span class="line">    UIEdgeInsets labelEdgeInsets = UIEdgeInsetsZero;</span><br><span class="line">    </span><br><span class="line">    // 3. 根据style和space得到imageEdgeInsets和labelEdgeInsets的值</span><br><span class="line">    switch (style) &#123;</span><br><span class="line">        case MKButtonEdgeInsetsStyleTop:</span><br><span class="line">        &#123;</span><br><span class="line">            imageEdgeInsets = UIEdgeInsetsMake(-labelHeight-space/2.0, 0, 0, -labelWidth);</span><br><span class="line">            labelEdgeInsets = UIEdgeInsetsMake(0, -imageWith, -imageHeight-space/2.0, 0);</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line">        case MKButtonEdgeInsetsStyleLeft:</span><br><span class="line">        &#123;</span><br><span class="line">            imageEdgeInsets = UIEdgeInsetsMake(0, -space/2.0, 0, space/2.0);</span><br><span class="line">            labelEdgeInsets = UIEdgeInsetsMake(0, space/2.0, 0, -space/2.0);</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line">        case MKButtonEdgeInsetsStyleBottom:</span><br><span class="line">        &#123;</span><br><span class="line">            imageEdgeInsets = UIEdgeInsetsMake(0, 0, -labelHeight-space/2.0, -labelWidth);</span><br><span class="line">            labelEdgeInsets = UIEdgeInsetsMake(-imageHeight-space/2.0, -imageWith, 0, 0);</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line">        case MKButtonEdgeInsetsStyleRight:</span><br><span class="line">        &#123;</span><br><span class="line">            imageEdgeInsets = UIEdgeInsetsMake(0, labelWidth+space/2.0, 0, -labelWidth-space/2.0);</span><br><span class="line">            labelEdgeInsets = UIEdgeInsetsMake(0, -imageWith-space/2.0, 0, imageWith+space/2.0);</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">    // 4. 赋值</span><br><span class="line">    self.titleEdgeInsets = labelEdgeInsets;</span><br><span class="line">    self.imageEdgeInsets = imageEdgeInsets;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我写了个Demo在github上，地址：<a target="_blank" rel="noopener" href="https://github.com/mokong/MKButtonStyle">自定义Button</a></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/Phelthas/p/4452235.html">UIButton的titleEdgeInsets属性和imageEdgeInsets属性实现图片文字按要求排列</a>，这篇博客里介绍了上面的原理，建议仔细看，理解之后就可以明白</li>
<li><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/62850b201049">UIButton 的 imageEdgeInsets 和 titleEdgeInsets</a>，这篇博客末尾有github地址，我写的时候没有理解原理，所以设置的时候，参照了他的代码</li>
<li><a target="_blank" rel="noopener" href="http://victorchee.github.io/blog/button-layout-with-image-and-title/">如何布局包含Image和Title的UIButton</a>，这篇是我最开始参考的，只有代码，没有原理</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://morganwang.cn">今是昨非</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://morganwang.cn/2015/12/30/%E5%AE%9E%E7%8E%B0Button%E6%96%87%E5%AD%97(titleLabel)%E5%92%8C%E5%9B%BE%E7%89%87(imageView)%E4%B8%8A%E4%B8%8B%E6%8E%92%E5%88%97/">http://morganwang.cn/2015/12/30/%E5%AE%9E%E7%8E%B0Button%E6%96%87%E5%AD%97(titleLabel)%E5%92%8C%E5%9B%BE%E7%89%87(imageView)%E4%B8%8A%E4%B8%8B%E6%8E%92%E5%88%97/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://morganwang.cn" target="_blank">今是昨非的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%8A%80%E6%9C%AF/">技术</a></div><div class="post-share"><div class="social-share" data-image="/assets/img/avatar.jpeg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2016/01/04/%E8%BD%AE%E6%92%AD%E5%9B%BE%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F/" title="轮播图实现的三种方式"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">轮播图实现的三种方式</div></div><div class="info-2"><div class="info-item-1">轮播图实现的三种方式假设有5张图片，分别是：12345，实现轮播图  方法1：用scrollView加NSTimer实现，思路：12345五张图片，实现轮播，我添加两张，变成5123451，当滑到最后一个1时，无动画位移回第一个1；当倒着滑到5时，无动画回最后的5。    难点在于：给定数组的个数，及两个边界的判断  方法2：用collectionView加NSTimer实现，思路：12345五张图片，对应collectionView的1个section，即一个section有5个row；至于有多少个section，尽量设置的大一些，eg：100；（collectionView有重用机制）所以不用担心内存问题。  难点在于：滑动的逻辑处理；如果你把section设置的非常大，就不用担心倒着滑的问题，毕竟不是每个人都那么闲。 1234567891011121314151617181920- (void)nextPage:(id)sender &#123;    // 1. 得到当前正在显示的cell的indexPath，（只有一个）    NSIndexPath *currentI...</div></div></div></a><a class="pagination-related" href="/2015/12/07/iOS%E5%BC%80%E5%8F%91%E2%80%94%E2%80%94%E6%89%AB%E7%A0%81%E7%95%8C%E9%9D%A2%E5%AE%9E%E7%8E%B0/" title="iOS开发——扫码界面实现"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">iOS开发——扫码界面实现</div></div><div class="info-2"><div class="info-item-1">类似下面这样一个收款界面的实现   界面分析 黑色半透明背景 navgationBar下面绿色的那个headerView 扫码框，及绿色动态扫码线的实现 扫码框下面的提示文字  黑色背景的实现，可能跟想象的不同，见下图（图中的1/2/3只是标识不同部分，不是顺序），先是需要放一个backView，然后是放中间的扫码框3，再然后上下左右四个1，最后放headerView和提示文字2;  实现</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/04/21/Algorithem_Merge_Two_Binary_Trees/" title="Algorithem_Merge Two Binary Trees"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-21</div><div class="info-item-2">Algorithem_Merge Two Binary Trees</div></div><div class="info-2"><div class="info-item-1">Algorithem_Merge Two Binary TreesYou are given two binary trees root1 and root2. Imagine that when you put one of them to cover the other, some nodes of the two trees are overlapped while the others are not. You need to merge the two trees into a new binary tree. The merge rule is that if two nodes overlap, then sum node values up as the new value of the merged node. Otherwise, the NOT null node will be used as the node of the new tree.   Return the merged tree. Note: The merging process must...</div></div></div></a><a class="pagination-related" href="/2024/07/31/iOS%E9%9D%A2%E8%AF%95%E9%A2%98/" title="Swift 面试题"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-31</div><div class="info-item-2">Swift 面试题</div></div><div class="info-2"><div class="info-item-1">背景被问到的面试题，这里记录一下。   问题Swift 中 Struct 和 Class 的区别Swift 中 为什么 String、Array、Dictionary 用 Struct 实现Swift 中写时复制的原理Swift 中变量作用域有哪些，区别是什么Swift中 Protocol 如何声明可空MVP 的优点是什么RxSwift 中冷信号和热信号的区别RxSwift 中 CombineLatest、zip、merge的区别Git 中 rebase和 merge 的区别，rebased的 commitID 会改变吗SwiftUI 中 View 传值方式有哪些什么情况下触发 layoutSubviews 答案Swift 中 Struct 和 Class 的区别Struct是值类型，Class 是引用类型；Struct和 Class 都可以有属性和方法，但是 let 修饰的 Struct 不能更改，Class 修饰的可以更改；Struct方法中修改属性需要在方法前添加 mutating 关键字。Struct和 Class 都可以实现协议。Struct不能被继承，Class 可以...</div></div></div></a><a class="pagination-related" href="/2023/09/11/%E7%9F%AD%E4%BF%A1%E8%BF%87%E6%BB%A4APP%E5%BC%80%E5%8F%91/" title="短信过滤 APP 开发"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-11</div><div class="info-item-2">短信过滤 APP 开发</div></div><div class="info-2"><div class="info-item-1">短信过滤 APP 开发本文发布在搜狐技术产品-短信过滤APP开发 一直想开发一个自己的短信过滤APP，但是一直没有具体实施，现在终于静下心来，边开发边记录下整体的开发过程。 垃圾短信样本遇到的第一个问题是，既然要过滤垃圾短信，那首先要识别哪些是垃圾短信？如何识别呢？ 参考之前训练识别钢管计数的经验，决定通过 CoreML 训练Text模型来识别，那问题来了，要训练模型的短信数据集怎么来？ 一开始打算网上找到垃圾短信样本，但找了好久没找到，于是就想到用自己和家人手机里的短信，毕竟手机里短信一般不删除，也有小几千条，而且垃圾短信、推销、广告之类的应有尽有。   所以问题就变成了，如何导出 iPhone 短信？ 这里笔者也查了好久，找到的第三方软件基本都是需要收费，最终发现了一个免费导出的方案。 首先不加密备份手机到电脑，如下图，选中Back up all the data on your iPhone to this Mac，点击Back Up Now，等待备份完成，备份完成后，再点击Manage Backups  Manage Backups点击后，界面如下，可以看到已备份的记录，...</div></div></div></a><a class="pagination-related" href="/2021/04/21/iOS%20%E5%88%A0%E9%99%A4SceneDelegate%E5%92%8CStoryboard/" title="iOS 删除新创建项目中的SceneDelegate"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-21</div><div class="info-item-2">iOS 删除新创建项目中的SceneDelegate</div></div><div class="info-2"><div class="info-item-1">iOS 删除新创建项目中的SceneDelegate背景Xcode 11之后新建工程，默认为有SceneDelegate，但是SceneDelegate是从iOS 13之后才有的，如果最低兼容版本到iOS 13以下，需要怎么做呢？   过程首先来看一下，SceneDelegate是什么，为什么会有SceneDelegate 官方说明：  A UISceneSession object manages a unique runtime instance of your scene. When the user adds a new scene to your app, or when you request one programmatically, the system creates a session object to track that scene. The session contains a unique identifier and the configuration details of the scene. UIKit maintains the sessio...</div></div></div></a><a class="pagination-related" href="/2022/04/15/Algorithem_ReverseWords/" title="Algorithem_ReverseWords"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-15</div><div class="info-item-2">Algorithem_ReverseWords</div></div><div class="info-2"><div class="info-item-1">Algorithem_ReverseWordsReverse Words in a String IIIGiven a string s, reverse the order of characters in each word within a sentence while still preserving whitespace and initial word order.    Example 1: 12Input: s = &quot;Let&#x27;s take LeetCode contest&quot;Output: &quot;s&#x27;teL ekat edoCteeL tsetnoc&quot;  Example 2: 12Input: s = &quot;God Ding&quot;Output: &quot;doG gniD&quot;  解法一逻辑：把字符串根据空格切割成数组，然后遍历数组，对数组中字符串调用 reversed 方法，最后在使用空格join为字符串返回 代码如下： 12345678910111213class Solution &#...</div></div></div></a><a class="pagination-related" href="/2024/12/04/%E5%85%A8%E5%B9%B3%E5%8F%B0%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7Reqable%E4%BD%BF%E7%94%A8/" title="全平台抓包工具Reqable使用"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-04</div><div class="info-item-2">全平台抓包工具Reqable使用</div></div><div class="info-2"><div class="info-item-1">背景在iOS开发中，经常会遇到需要抓包的情况，比如查看网络请求、查看接口返回的数据等。而在iOS开发中，常用的抓包工具有Charles、Proxyman等，这些并非不好用，尤其是Proxyman，使用起来非常方便。但是需要付费，免费的只能查看3个域名；而且这些工具使用的时候需要手动进入网络中设置代理，比较麻烦。   无意中发现了Requable，优点是：全平台可用，且抓包功能免费，没有广告；最好用的是可以在手机上一键连接电脑，不需要进入网络设置代理，非常方便。优点：  全平台，iPhone、Mac、Windows、Android都有APP 抓包免费，不限制域名数量 可以在手机上一键连接电脑，不需要进入网络设置代理 可以查看请求头、请求体、响应头、响应体，设置断点，拦截修改返回和相应；（免费版最多生效3个）  缺点：VPN的开启和关闭标识不够明显，在使用过程中容易被误操作。 使用以Mac版本来看，如下图，主要有以下几个部分：   区域1，导航部分，在这里可以看到所有的域名，可以选择对指定的域名置顶或添加书签，单击选中时后面会有绿色的勾，代表过滤这个域名；选中多个，则过滤多个；没有选...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/assets/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">今是昨非</div><div class="author-info-description">技术分享、生活感悟</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">189</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mokong"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/mokong" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://x.com/morgan2015_wang" target="_blank" title="Twitter"><i class="fab fa-X"></i></a><a class="social-icon" href="mailto:mokong.2015.1992@email.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0Button%E6%96%87%E5%AD%97-titleLabel-%E5%92%8C%E5%9B%BE%E7%89%87-imageView-%E4%B8%8A%E4%B8%8B%E6%8E%92%E5%88%97"><span class="toc-number">1.</span> <span class="toc-text">实现Button文字(titleLabel)和图片(imageView)上下排列</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E9%9D%A2%E4%B8%80%E6%AE%B5%E5%BE%88%E9%87%8D%E8%A6%81"><span class="toc-number">1.1.</span> <span class="toc-text">上面一段很重要</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">1.2.</span> <span class="toc-text">参考</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/22/Google%20Antigravity%20%E7%99%BB%E5%BD%95%E4%B8%8D%E4%BA%86%E8%A7%A3%E5%86%B3/" title="Google Antigravity 登录不了解决">Google Antigravity 登录不了解决</a><time datetime="2026-01-22T02:38:00.000Z" title="发表于 2026-01-22 10:38:00">2026-01-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/21/%E8%BF%9E%E5%A4%9C%E5%BC%80%E5%8F%91%E4%BA%86%E4%B8%80%E4%B8%AA%20Mac%20%E4%B8%8A%E4%B9%85%E5%9D%90%E6%8F%90%E9%86%92%E5%B7%A5%E5%85%B7/" title="连夜开发了一个 Mac 上久坐提醒工具">连夜开发了一个 Mac 上久坐提醒工具</a><time datetime="2026-01-21T13:45:00.000Z" title="发表于 2026-01-21 21:45:00">2026-01-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/20/%E5%85%B3%E4%BA%8E%20AI%20%E4%B8%8E%E5%BC%80%E5%8F%91/" title="关于 AI 与开发">关于 AI 与开发</a><time datetime="2026-01-20T11:41:00.000Z" title="发表于 2026-01-20 19:41:00">2026-01-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/16/%E5%88%B6%E4%BD%9C%E8%87%AA%E5%B7%B1%E8%A1%A8%E6%83%85%E5%8C%85/" title="制作自己表情包">制作自己表情包</a><time datetime="2026-01-16T02:21:00.000Z" title="发表于 2026-01-16 10:21:00">2026-01-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/13/%E9%B8%BF%E8%92%99%E6%88%AA%E5%9B%BE%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7/" title="鸿蒙截图生成工具">鸿蒙截图生成工具</a><time datetime="2025-10-13T07:24:00.000Z" title="发表于 2025-10-13 15:24:00">2025-10-13</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2026 By 今是昨非</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 5.4.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div><div class="footer_custom_text"><span>日出江花红胜火，春来江水绿如蓝，能不忆江南</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><div class="js-pjax"></div><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js" defer="defer"></script><script>document.addEventListener('DOMContentLoaded', () => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      false
        ? pjax.loadUrl('/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>